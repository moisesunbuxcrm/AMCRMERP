(this.webpackJsonpestimatesv2=this.webpackJsonpestimatesv2||[]).push([[0],{112:function(e,t,n){},271:function(e,t,n){},430:function(e,t,n){},449:function(e,t,n){"use strict";n.r(t);var i,a,c=n(0),r=n.n(c),o=n(33),l=n.n(o),s=n(119),d=(n(271),n(450)),u=n(1),j=d.a.Content,m=function(e){var t=e.children;return Object(u.jsx)(d.a,{children:Object(u.jsx)(j,{children:t})})},b=n(24),h=n(479),p=n(480),v=n(481),O=n(482),f=n(478),x=n(483),g=n(110),y=n(193),_=n(86),w=n(5),N=n(16),C=(n(72),n(455)),A=n(264),E=n(263),S=n(259),I=n(90),P=n(460),k=n(452),D=n(451),R=n(463),M=n(54),T=n(453),L=n(464),B=n(462),F=n(153),Q=function(){return Object(F.b)()},H=F.c,U=n(25),z=n.n(U),W=n(39),K=n(46);!function(e){e.unavailable="unavailable",e.loading="loading",e.saving="saving",e.succeeded="succeeded",e.failed="failed"}(i||(i={})),function(e){e.none="none",e.new="new",e.modified="modified",e.deleted="deleted"}(a||(a={}));var G,Y,J=function(e){return e===a.new},X=function(e){return e!==a.none},Z=function(e){return e===a.deleted},q=[{value:"4504",label:"10300 CORAL WAY LLC"},{value:"4646",label:"10300 INVESTMENT LLC"},{value:"5744",label:"11020 PEACHTREE DRIVE LLC"},{value:"7825",label:"1125 ALHAMBRA LLC"},{value:"6859",label:"114 MENORES LLC"},{value:"5733",label:"1171 MANAGEMENT LLC"},{value:"2826",label:"12687 INVESTMENT CORP"},{value:"3923",label:"13260658 LLC TRS"},{value:"4448",label:"13306 BY THE SEA CORP"},{value:"8882",label:"1361 SW 124 CT'"},{value:"7168",label:"14170 SW 260 ST 102 MIAMI FLORIDA 33032 LLC"},{value:"2020",label:"14170 SW 260 ST 102 MIAMI FLORIDA 33032 LLC"},{value:"839",label:"147 BIRD ROAD DEVELOPMENT INC"}],V=function(e){return{contactaddress:"contactaddress_".concat(e),contactmobile:"contactmobile_".concat(e),contactname:"contactname_".concat(e),contactphone:"contactphone_".concat(e),customeraddress:"".concat(e," NE 158 ST"),customercity:"North Miami Beach",customeremail:"email".concat(e,"@hotmail.com"),customermobile:"customermobile_".concat(e),customername:"Name_".concat(e),customerphone:"(305)968-780".concat(e),customerstate:"Florida",customerzip:"33161",folionumber:"123456789".concat(e),id:e,reltype:2}},$=function(e,t){var n=V(e);return Object(w.a)(Object(w.a)({},n),{},{customername:null!==t&&void 0!==t?t:n.customername})},ee=["None","Home Owner","Dealer","Contractor","Walk in"],te=[0,.45,.17,.35,.45],ne=function(e){return e?te[e]:0},ie={customerNames:[],customerNamesStatus:i.unavailable,customerDetails:{},customerDetailsStatus:i.unavailable,customerDetailsRequested:{},error:null},ae=Object(K.b)("getCustomerNames",Object(W.a)(z.a.mark((function e(){var t,n;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Fetching customer names "),e.next=4,fetch("http://".concat(window.location.hostname,"/AMCRMERP/htdocs/custom/amhpestimatesv2/db/getcustomernames.php"));case 4:return t=e.sent,e.next=7,t.json();case 7:return n=e.sent,e.abrupt("return",n);case 9:return e.abrupt("return",q);case 10:case"end":return e.stop()}}),e)})))),ce=Object(K.b)("getCustomerDetails",function(){var e=Object(W.a)(z.a.mark((function e(t){var n,i,a,c,r;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Fetching customer ",t),e.next=4,fetch("http://".concat(window.location.hostname,"/AMCRMERP/htdocs/custom/amhpestimatesv2/db/getcustomerdetails.php?id=").concat(t));case 4:return i=e.sent,e.next=7,i.json();case 7:return a=e.sent,c=null,c=a.length&&a.length>0?a[0]:a,e.abrupt("return",c);case 11:return r=null===(n=q.find((function(e){return e.value===t.toString()})))||void 0===n?void 0:n.label,e.abrupt("return",$(t,null!==r&&void 0!==r?r:t.toString()));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),re=Object(K.c)({name:"customers",initialState:ie,reducers:{},extraReducers:function(e){e.addCase(ae.pending,(function(e,t){e.customerNamesStatus=i.loading})),e.addCase(ae.fulfilled,(function(e,t){e.customerNamesStatus=i.succeeded,e.customerNames=t.payload})),e.addCase(ae.rejected,(function(e,t){e.customerNamesStatus=i.failed,e.error=t.error.message})),e.addCase(ce.pending,(function(e,t){e.customerDetailsStatus=i.loading})),e.addCase(ce.fulfilled,(function(e,t){var n;e.customerDetailsStatus=i.succeeded,e.customerDetails&&(null===(n=t.payload)||void 0===n?void 0:n.id)&&(e.customerDetails[t.payload.id]=t.payload)})),e.addCase(ce.rejected,(function(e,t){e.customerDetailsStatus=i.failed,e.error=t.error.message}))}}),oe=function(e){return e.customers.customerNames},le=function(e){return e.customers.customerNamesStatus},se=function(e){return e.customers.customerDetails},de=function(e){return e.customers.customerDetailsStatus},ue=re.reducer,je=n(111),me=n(62);!function(e){e.InProgress="In Progress",e.Delivered="Delivered",e.Approved="Approved",e.Rejected="Rejected"}(Y||(Y={}));var be,he=(G={},Object(me.a)(G,Y.InProgress,"green"),Object(me.a)(G,Y.Delivered,"#108ee9"),Object(me.a)(G,Y.Approved,"#87d068"),Object(me.a)(G,Y.Rejected,"#f50"),G),pe=function(e){return e!==Y.InProgress},ve=function(e){return!e||pe(null===e||void 0===e?void 0:e.status)},Oe=function(e){return e===Y.Rejected},fe=function(e){switch(null===e||void 0===e?void 0:e.toLowerCase()){case"delivered":return Y.Delivered;case"approved":return Y.Approved;case"rejected":return Y.Rejected;default:return Y.InProgress}};!function(e){e.ImpactProduct="Impact Product",e.Hardware="Hardware",e.StormPanel="StormPanel",e.Accordion="Accordion",e.Design="Design",e.Material="Material"}(be||(be={}));var xe,ge=be,ye=function(e,t,n){return{_modified:a.new,add_inst_discount:0,add_sales_discount:0,approved_date:void 0,customerid:n,defcolor:"WHITE",defglasscolor:"WHITE",delivered_date:void 0,deposit_percent_with_install:0,deposit_percent:0,estimatenum:void 0,folio:void 0,id:void 0,is_alteration:!1,is_installation_included:!0,new_construction_owner_responsability:!1,notes:"",public_notes:"",pay_upon_completion:!0,percent_final_inspection:0,permitId:0,permits:700,quotedate:_e(new Date),rejected_date:void 0,salestax:0,status:Y.InProgress,status_reason:"",totalprice:0,vendor:e,vendor_phone:t,warranty_years:5,qualifiername:void 0,items:[]}},_e=function(e){var t=function(e){return e>9?e.toString():"0"+e};return e?e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+" "+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds()):""},we=function(e){var t=X(e._modified);if(!t&&e.items)for(var n=0;!t&&n<e.items.length;n++){var i=e.items[n];t=X(i._modified)}return t};!function(e){e.None="",e.Window="Window",e.Door="Door",e.Hardware="Hardware"}(xe||(xe={}));var Ne,Ce=Object.keys(xe).filter((function(e){return isNaN(Number(e))})),Ae=function(e){return Ce[e]},Ee=function(e){return Ce.indexOf(e)},Se=xe;!function(e){e.CasementWindowSeries="Casement Window Series",e.FrenchDoor="French Door",e.FixedGlass="Fixed Glass",e.HorizontalRollingSeries="Horizontal Rolling Series",e.SingleHungSeries="Single Hung Series",e.SlidingDoor="Sliding Door",e.None=""}(Ne||(Ne={}));var Ie,Pe=Object.values(Ne).filter((function(e){return isNaN(Number(e))})),ke=Ne,De=function(e,t,n){return Object(w.a)(Object(w.a)({},function(e,t,n){return{_modified:a.none,color:"BRONZE",cost_price:200+e,estimateid:t,finalprice:500+e,id:e,image:"/AMCRMERP/htdocs/document.php?modulepart=product&attachment=0&file=36.75X50.375HRXOECOBB5.16C/36.75X50.375.png",inst_discount:.1,inst_price:300+e,itemno:n,itemtype:Se.Window,modtype:ge.ImpactProduct,name:"Eco window 36.75x25.75HRXOECOBB5.16C ".concat(e),otherfees:40+e,sales_discount:.1,sales_price:300+e,wintype:ke.SingleHungSeries}}(e,t,n)),{},{coating:"NONE",colonial_across:10+e,colonial_down:20+e,colonial_fee:0+e,configuration:"XOX",frame_color:"BRONZE",glass_color:"BRONZE",glass_type:"Laminated",height:50.375,heighttxt:"50 3/8",interlayer:"WHITE",is_colonial:!0,is_def_color:!0,is_def_glass_color:!0,is_screen:!1,is_standard:!0,length:5,lengthtxt:"5",product_ref:"26.25X50.375SHELECOWG5.16C",provider:"ECO WINDOWS",room_description:"Main Bedroom",roomnum:1,roomtype:1,floornum:1,width:26.25,widthtxt:"26 1/4"})},Re=function(e,t,n){return Object(w.a)(Object(w.a)({},function(e,t,n){return{_modified:a.none,color:"BRONZE",cost_price:200+e,estimateid:t,finalprice:300+e,id:e,image:"/AMCRMERP/htdocs/document.php?modulepart=product&entity=1&file=%2F619CENF58%26LATF59X%2F619CENF58%26LATF59.png",inst_discount:.1,inst_price:100+e,itemno:n,itemtype:Se.Hardware,modtype:ge.Hardware,name:"SATIN NICKEL CENTURY F58 & LAT F59 ACTIVE ".concat(e),otherfees:30+e,sales_discount:.1,sales_price:200+e,wintype:ke.None}}(e,t,n)),{},{configuration:"X",hardwaretype:"French Door",provider:"MILLWORK",product_ref:"619CENF58&LATF59X"})},Me=function(e){var t=V(e+1e3);return{_modified:a.none,add_inst_discount:.3,add_sales_discount:.16,approved_date:"2021-05-07 02:50:02",customerid:t.id,defcolor:"BRONZE",defglasscolor:"BRONZE",delivered_date:void 0,deposit_percent_with_install:40,deposit_percent:50,estimatenum:"E00002",folio:"04-3117-016-0342",id:e,is_alteration:!0,is_installation_included:!0,new_construction_owner_responsability:!1,pay_upon_completion:!1,percent_final_inspection:10,permitId:0,permits:500,quotedate:"2021-05-06 02:50:02",rejected_date:void 0,salestax:.26,status:Y.InProgress,status_reason:"",totalprice:1001,vendor:"Paul Dermody",vendor_phone:"123 456 7890",warranty_years:10,qualifiername:"Jose G Perez",customer:t,items:[]}},Te=function(e,t,n){return Object(w.a)(Object(w.a)({},De(e,t,n)),{},{roomtype:void 0})},Le=function(e,t,n){return Object(w.a)(Object(w.a)({},De(e,t,n)),{},{roomnum:void 0})},Be=function(e,t,n){return Object(w.a)(Object(w.a)({},De(e,t,n)),{},{wintype:ke.SingleHungSeries,width:100,height:56.75,length:5})},Fe=function(e,t,n){return Object(w.a)(Object(w.a)({},De(e,t,n)),{},{wintype:ke.SingleHungSeries,width:100,height:56.749,length:5})},Qe=function(e,t,n){return Object(w.a)(Object(w.a)({},De(e,t,n)),{},{roomtype:2,interlayer:"CLEAR"})},He=function(e){var t=100+e,n=1;return Object(w.a)(Object(w.a)({},Me(e)),{},{items:[Object(w.a)(Object(w.a)({},Te(t++,e,n++)),{},{roomnum:1}),Object(w.a)({},Re(t++,e,n++)),Object(w.a)({},Le(t++,e,n++)),Object(w.a)(Object(w.a)({},Be(t++,e,n++)),{},{roomnum:3}),Object(w.a)(Object(w.a)({},Fe(t++,e,n++)),{},{roomnum:3}),Object(w.a)(Object(w.a)({},Fe(t++,e,n++)),{},{roomnum:4}),Object(w.a)(Object(w.a)({},Fe(t++,e,n++)),{},{roomnum:4}),Object(w.a)(Object(w.a)({},Qe(t++,e,n++)),{},{roomnum:5}),Object(w.a)(Object(w.a)({},Qe(t++,e,n++)),{},{roomnum:6})]})},Ue=function(e){var t=He(e);switch(e){case 1:t=He(e);break;case 2:t=function(e){var t=100+e,n=1;return Object(w.a)(Object(w.a)({},Me(e)),{},{items:[Object(w.a)(Object(w.a)({},Be(t++,e,n++)),{},{roomnum:1}),Object(w.a)(Object(w.a)({},Fe(t++,e,n++)),{},{roomnum:1}),Object(w.a)({},Re(t++,e,n++))]})}(e)}return t},ze={estimate:void 0,estimateStatus:i.unavailable,nextItemId:-1},We=function(e){return e=(e=e.replace("\\n","\n")).replace("&qt;",'"')},Ke=Object(K.b)("fetchEstimate",function(){var e=Object(W.a)(z.a.mark((function e(t){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ge(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ge=function(){var e=Object(W.a)(z.a.mark((function e(t){var n,i,c,r,o,l;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Fetching estimate ",t),e.next=4,fetch("http://".concat(window.location.hostname,"/AMCRMERP/htdocs/custom/amhpestimatesv2/db/getEstimate.php?id=").concat(t));case 4:return n=e.sent,e.next=7,n.json();case 7:if(!(i=e.sent).msg){e.next=10;break}throw i.msg;case 10:if(i._modified=a.none,i.notes&&(i.notes=We(i.notes)),i.public_notes&&(i.public_notes=We(i.public_notes)),i.items)for(c in i.items)i.items[c]._modified=a.none;return e.abrupt("return",Object(w.a)(Object(w.a)({},i),{},{new_construction_owner_responsability:!!i.new_construction_owner_responsability,pay_upon_completion:!!i.pay_upon_completion}));case 15:for(l in r=Ue(t),o=[],r.items)o.push(Object(w.a)(Object(w.a)({},r.items[l]),{},{_modified:a.none}));return e.abrupt("return",Object(w.a)(Object(w.a)({},r),{},{items:o,_modified:a.none}));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ye=function(e){var t=Object.keys(e).reduce((function(t,n){return t+(void 0!==e[n]&&"object"!==typeof e[n]?"&".concat(n,"=").concat(encodeURIComponent(e[n])):"")}),"");return t.startsWith("&")?t.substr(1,t.length-1):""},Je=function(){var e=Object(W.a)(z.a.mark((function e(t){var n,i,c,r,o,l,s,d;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(w.a)({},t),i="",e.t0=t.modtype,e.next=e.t0===ge.ImpactProduct?5:e.t0===ge.Hardware?7:e.t0===ge.Material?9:e.t0===ge.Design?11:13;break;case 5:return i="EstimateImpactProduct",e.abrupt("break",13);case 7:return i="EstimateHardware",e.abrupt("break",13);case 9:return i="EstimateMaterial",e.abrupt("break",13);case 11:return i="EstimateDesign",e.abrupt("break",13);case 13:if(""===i){e.next=43;break}if(t._modified!==a.modified){e.next=24;break}return e.next=17,fetch("http://".concat(window.location.hostname,"/AMCRMERP/htdocs/custom/amhpestimatesv2/db/update").concat(i,".php"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Ye(t)});case 17:return c=e.sent,e.next=20,c.json();case 20:if(!(r=e.sent).error){e.next=23;break}throw r.error;case 23:n=Object(w.a)({},t);case 24:if(t._modified!==a.new){e.next=34;break}return e.next=27,fetch("http://".concat(window.location.hostname,"/AMCRMERP/htdocs/custom/amhpestimatesv2/db/create").concat(i,".php"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Ye(t)});case 27:return o=e.sent,e.next=30,o.json();case 30:if(!(l=e.sent).error){e.next=33;break}throw l.error;case 33:n=Object(w.a)(Object(w.a)({},t),{},{id:l.id,estimateitemid:l.estimateitemid});case 34:if(t._modified!==a.deleted){e.next=43;break}return e.next=37,fetch("http://".concat(window.location.hostname,"/AMCRMERP/htdocs/custom/amhpestimatesv2/db/delete").concat(i,".php"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id="+t.id});case 37:return s=e.sent,e.next=40,s.json();case 40:if(!(d=e.sent).error){e.next=43;break}throw d.error;case 43:return e.abrupt("return",Object(w.a)(Object(w.a)({},n),{},{_modified:a.none}));case 44:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xe=Object(K.b)("saveEstimate",function(){var e=Object(W.a)(z.a.mark((function e(t){var n,i,c,r,o,l,s,d,u,j;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Object(w.a)({},t),c=[],console.log("Saving estimate ",t),t._modified!==a.modified){e.next=16;break}return e.next=7,fetch("http://".concat(window.location.hostname,"/AMCRMERP/htdocs/custom/amhpestimatesv2/db/updateEstimate.php"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Ye(t)});case 7:return o=e.sent,e.next=10,o.json();case 10:if(!(l=e.sent).msg){e.next=13;break}throw l.msg;case 13:l.notes&&(l.notes=We(l.notes)),l.public_notes&&(l.public_notes=We(l.public_notes)),i=Object(w.a)(Object(w.a)({},l),{},{new_construction_owner_responsability:!!l.new_construction_owner_responsability,pay_upon_completion:!!l.pay_upon_completion});case 16:if(t._modified!==a.new){e.next=28;break}return e.next=19,fetch("http://".concat(window.location.hostname,"/AMCRMERP/htdocs/custom/amhpestimatesv2/db/createEstimate.php"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Ye(t)});case 19:return s=e.sent,e.next=22,s.json();case 22:if(!(d=e.sent).msg){e.next=25;break}throw d.msg;case 25:d.notes&&(d.notes=We(d.notes)),d.public_notes&&(d.public_notes=We(d.public_notes)),i=Object(w.a)(Object(w.a)({},d),{},{new_construction_owner_responsability:!!d.new_construction_owner_responsability,pay_upon_completion:!!d.pay_upon_completion});case 28:return u=[],null===(r=t.items)||void 0===r||r.forEach((function(e){u.push(Object(W.a)(z.a.mark((function t(){var n;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!X(e._modified)){t.next=7;break}return t.next=3,Je(Object(w.a)(Object(w.a)({},e),{},{estimateid:i.id||0}));case 3:n=t.sent,e._modified!==a.deleted&&c.push(n),t.next=8;break;case 7:c.push(Object(w.a)({},e));case 8:case"end":return t.stop()}}),t)})))())})),e.next=32,Promise.all(u);case 32:e.next=36;break;case 34:i.id||(i.id=999),c=null===(j=i.items)||void 0===j?void 0:j.filter((function(e){return e._modified!==a.deleted})).map((function(e){return Object(w.a)(Object(w.a)({},e),{},{_modified:a.none})}));case 36:return e.abrupt("return",Object(w.a)(Object(w.a)({},i),{},{items:null===(n=c)||void 0===n?void 0:n.map((function(e){return Object(w.a)(Object(w.a)({},e),{},{_modified:a.none})})),_modified:a.none}));case 37:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ze=(Object(K.b)("duplicateEstimate2",function(){var e=Object(W.a)(z.a.mark((function e(t){var n,i,a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(w.a)({},t),e.next=4,fetch("http://".concat(window.location.hostname,"/AMCRMERP/htdocs/custom/amhpestimatesv2/db/copyEstimate.php"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Ye({id:t.id})});case 4:return i=e.sent,e.next=7,i.json();case 7:if(!(a=e.sent).msg||"OK"===a.msg){e.next=10;break}throw a.msg;case 10:return e.next=12,Ge(a.newID);case 12:n=e.sent,e.next=18;break;case 15:return e.next=17,Ge((n.id||0)+1e3);case 17:n=e.sent;case 18:return e.abrupt("return",Object(w.a)({},n));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(K.c)({name:"estimate",initialState:ze,reducers:{createEstimate:function(e,t){var n;e.estimate=Object(w.a)(Object(w.a)({},t.payload),{},{customer:t.payload.customer?Object(w.a)({},t.payload.customer):void 0,items:null===(n=t.payload.items)||void 0===n?void 0:n.map((function(e){return Object(w.a)({},e)})),_modified:X(t.payload._modified)?t.payload._modified:a.new})},duplicateEstimate:function(e,t){var n;e.estimate=Object(w.a)(Object(w.a)({},t.payload),{},{id:void 0,estimatenum:void 0,quotedate:_e(new Date),status:Y.InProgress,status_reason:void 0,approved_date:void 0,rejected_date:void 0,delivered_date:void 0,customer:t.payload.customer?Object(w.a)({},t.payload.customer):void 0,permitId:void 0,items:null===(n=t.payload.items)||void 0===n?void 0:n.map((function(e){return Object(w.a)(Object(w.a)({},e),{},{id:void 0,estimateid:0,_modified:a.new})})),_modified:a.new})},updateEstimate:function(e,t){var n;e.estimate=Object(w.a)(Object(w.a)({},t.payload),{},{customer:t.payload.customer?Object(w.a)({},t.payload.customer):void 0,items:null===(n=t.payload.items)||void 0===n?void 0:n.map((function(e){return Object(w.a)({},e)})),_modified:X(t.payload._modified)?t.payload._modified:a.modified})},updateItem:function(e,t){var n=Object(w.a)(Object(w.a)({},t.payload),{},{_modified:X(t.payload._modified)?t.payload._modified:a.modified}),i=[];e.estimate&&e.estimate.items&&(i=e.estimate.items.map((function(e){return e.id===t.payload.id?n:e})),e.estimate=Object(w.a)(Object(w.a)({},e.estimate),{},{items:i}))},deleteItem:function(e,t){if(e.estimate){var n=[];e.estimate.items&&(n=e.estimate.items.filter((function(e){return e.itemno!==t.payload.itemno}))),t.payload._modified!==a.new&&n.push(Object(w.a)(Object(w.a)({},t.payload),{},{_modified:a.deleted})),e.estimate=Object(w.a)(Object(w.a)({},e.estimate),{},{items:n,_modified:e.estimate._modified})}},copyItem:function(e,t){if(e.estimate){var n=[];e.estimate.items&&(n=[].concat(Object(je.a)(e.estimate.items),[Object(w.a)(Object(w.a)({},t.payload),{},{id:e.nextItemId--,itemno:e.estimate.items.map((function(e){return e.itemno||0})).reduce((function(e,t){return e<t?t:e}),0)+1,_modified:a.new})]),e.estimate=Object(w.a)(Object(w.a)({},e.estimate),{},{items:n,_modified:e.estimate._modified}))}},addItem:function(e,t){if(e.estimate){var n=e.estimate.items;n=[].concat(Object(je.a)(e.estimate.items),[Object(w.a)(Object(w.a)({},t.payload),{},{id:e.nextItemId--,itemno:e.estimate.items?e.estimate.items.map((function(e){return e.itemno||0})).reduce((function(e,t){return e<t?t:e}),0)+1:1,_modified:a.new})]),e.estimate=Object(w.a)(Object(w.a)({},e.estimate),{},{items:n,_modified:e.estimate._modified})}}},extraReducers:function(e){e.addCase(Ke.pending,(function(e){e.estimateStatus=i.loading})),e.addCase(Ke.fulfilled,(function(e,t){t.payload.err?(e.estimateStatus=i.failed,e.estimate=void 0,e.error=t.payload.err):(e.estimateStatus=i.succeeded,e.estimate=t.payload,e.error=void 0)})),e.addCase(Ke.rejected,(function(e,t){e.estimateStatus=i.failed,e.error=t.error.message})),e.addCase(Xe.pending,(function(e){e.estimateStatus=i.saving})),e.addCase(Xe.fulfilled,(function(e,t){e.estimateStatus=i.succeeded,e.estimate=t.payload,e.error=void 0})),e.addCase(Xe.rejected,(function(e,t){e.estimateStatus=i.failed,e.error=t.error.message}))}})),qe=Ze.actions,Ve=qe.createEstimate,$e=qe.updateEstimate,et=qe.duplicateEstimate,tt=qe.updateItem,nt=qe.deleteItem,it=qe.copyItem,at=qe.addItem,ct=function(e){return e.estimates.estimate},rt=function(e){return e.estimates.estimateStatus},ot=function(e){var t;return null!==(t=e.estimates.error)&&void 0!==t?t:""},lt=Ze.reducer,st={user:{name:"PD",admin:!1,phone:"1234567890"},company:{name:"A & M Hurricane Protection",address:"1050 E 15 STREET",town:"HIALEAH",zip:"33010",state:"Florida",phone:"(305) 885-0678",fax:"(305) 482-0510"},colors:[{value:"5",label:"ALUMINUM"},{value:"11",label:"AZURE"},{value:"1",label:"BEIGE"},{value:"2",label:"BRONZE"},{value:"7",label:"CLEAR"},{value:"10",label:"CLEAR ANODIZE"},{value:"12",label:"GRAY"},{value:"3",label:"IVORY"},{value:"4",label:"MILL FINISH"},{value:"9",label:"NONE"},{value:"8",label:"PENDING"},{value:"6",label:"WHITE"}],providers:[{value:"7",label:"ECO WINDOWS"},{value:"2",label:"EMS HV 1"},{value:"5",label:"EMS HV 2"},{value:"6",label:"EMS Panels"},{value:"4",label:"FS Panels"},{value:"3",label:"FS Performance 2"},{value:"10",label:"JB GARAGE DOORS"},{value:"11",label:"MILLWORK"},{value:"9",label:"MR. GLASS"},{value:"8",label:"PGT WINDOWS"},{value:"1",label:"RC AS 500"}],roomtypes:[{value:"4",label:"Back Door"},{value:"2",label:"Bathroom"},{value:"1",label:"Bedroom"},{value:"5",label:"Front Door"},{value:"6",label:"Kitchen"},{value:"7",label:"Living Room"},{value:"8",label:"Side Door"},{value:"9",label:"Slide Door"},{value:"3",label:"Other"},{value:"0",label:"Unknown"}],itemtypes:[{value:"1",label:"3F"},{value:"2",label:"ADJ"},{value:"3",label:"CEI"},{value:"4",label:"EXT"},{value:"5",label:"F"},{value:"6",label:"H"},{value:"7",label:"REM"},{value:"8",label:"STD"},{value:"9",label:"U"},{value:"10",label:"WO"}],mounts:[{value:"5",label:"CC"},{value:"4",label:"CFL"},{value:"3",label:"CW"},{value:"2",label:"WFL"},{value:"1",label:"WW"}],angulartypes:[{value:"1",label:"1x3"},{value:"8",label:"1x4x1/4"},{value:"7",label:"1x4x1/8"},{value:"16",label:"22.5\xba"},{value:"13",label:"2x2"},{value:"2",label:"2x3"},{value:"6",label:"2x4"},{value:"10",label:"2x4x1/4"},{value:"9",label:"2x4x1/8"},{value:"3",label:"2x5"},{value:"12",label:"2x6x1/4"},{value:"11",label:"2x6x1/8"},{value:"4",label:"2x7"},{value:"15",label:"45\xba"},{value:"14",label:"90\xba"},{value:"5",label:"N/A"}],locksizes:[{value:"2",label:"-6"},{value:"1",label:"-4"},{value:"3",label:"0"}],lockins:[{value:"1",label:"IN"},{value:"2",label:"OUT"},{value:"3",label:"OUT IN"},{value:"4",label:"OUT OUT"}],defaultvalues:{PERMIT:"500",INSTTIME:"8",CHECK50:"Y",SIGNATUREREQ:"N",YEARSWARRANTY:"10",CHECK10YEARSWARRANTY:"Y",LIFETIMEWARRANTY:"N",CHECKFREEOPENINGCLOSING:"N",CHECKNOPAYMENT:"Y",PO_TEMPLATE:"po_standard",ESTHTVALUE:"8",CHECK10YEARSFREEMAINTENANCE:"Y",HTVALUE:"2",MATERIAL:"ALUMINUM",COLOR:"NONE",PROVIDERID:"3",LOCKIN:"OUT",LOCKSIZE:"0",SQFEETPRICE:"14"},configurations:[{value:"1",label:"EQUAL LITES"},{value:"2",label:"O"},{value:"3",label:"OX"},{value:"14",label:"OXX"},{value:"12",label:"OXXO"},{value:"4",label:"UNEQUAL LITES"},{value:"15",label:"X"},{value:"5",label:"XL"},{value:"6",label:"XO"},{value:"11",label:"XOX"},{value:"8",label:"XOX 1/3 1/3 1/3"},{value:"7",label:"XOX 1/4 1/2 1/3"},{value:"9",label:"XR"},{value:"10",label:"XX"},{value:"13",label:"XXO"}]},dt={defaults:{user:{name:"",admin:!1,phone:""},company:{name:"",address:"",town:"",zip:"",state:"",phone:"",fax:""},colors:[],providers:[],roomtypes:[]},defaultsStatus:i.unavailable},ut=Object(K.b)("getDefaults",function(){var e=Object(W.a)(z.a.mark((function e(t,n){var i,a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,fetch("http://".concat(window.location.hostname,"/AMCRMERP/htdocs/custom/amhpestimatesv2/formdata.js.php"));case 3:return i=e.sent,e.next=6,i.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:return e.abrupt("return",st);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),jt=Object(K.c)({name:"defaults",initialState:dt,reducers:{},extraReducers:function(e){e.addCase(ut.pending,(function(e,t){e.defaultsStatus=i.loading})),e.addCase(ut.fulfilled,(function(e,t){e.defaultsStatus=i.succeeded,e.defaults=t.payload})),e.addCase(ut.rejected,(function(e,t){e.defaultsStatus=i.failed,e.error=t.error.message}))}}),mt=function(e){return e.defaults.defaults},bt=function(e){return e.defaults.defaultsStatus},ht=function(e){return function(t){var n,i,a;return(null===(n=e.defaults.defaults)||void 0===n?void 0:n.roomtypes)&&(a=null===(i=e.defaults.defaults.roomtypes.find((function(e){return e.value===t})))||void 0===i?void 0:i.label),a||(a=t),a}},pt=function(e){return function(t){var n,i,a;return(null===(n=e.defaults.defaults)||void 0===n?void 0:n.roomtypes)&&(a=null===(i=e.defaults.defaults.roomtypes.find((function(e){return e.label===t})))||void 0===i?void 0:i.value),a||(a=t),a}},vt=jt.reducer,Ot=n(459),ft=(n(112),function(e){return Object(u.jsx)(Ot.a,{okButtonProps:{style:{display:"none"}},title:"Product Type",visible:e.visible,onCancel:e.handleCancel,children:Object(u.jsxs)("div",{className:"buttons_grid",children:[Object(u.jsx)(M.a,{className:"button_product",onClick:e.handleImpactProduct,children:"Impact Product"}),Object(u.jsx)(M.a,{className:"button_product",onClick:e.handleHardware,children:"Hardware"}),Object(u.jsx)(M.a,{className:"button_product",onClick:e.handleMaterial,children:"Material"}),Object(u.jsx)(M.a,{className:"button_product",onClick:e.handleDesign,children:"Design"})]})})}),xt=n(77),gt=n.n(xt),yt=n(27),_t=n.n(yt),wt=new Intl.NumberFormat("us-EN",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}),Nt=function(e){return Math.round(100*(e||0))/100},Ct=function(e){return Math.round(1e4*(e||0))/100},At=function(e){return wt.format(e||0)},Et=function(e){return Number((e||"").replace(/[^\d.]/g,""))},St=function(e){return"".concat(Ct(e),"%")},It=function(e){return Number((e||"").replace("%",""))/100},Pt=/[^0-9]/g,kt=function(e){var t=(e||"").replaceAll(Pt,"");if(""!==t)return(t=t.substring(0,10)).length<10&&(t="0000000000".substring(t.length)+t),t.substring(0,3)+"-"+t.substring(3,6)+"-"+t.substring(6)},Dt={xs:2,sm:8,md:8,lg:12,xl:12},Rt={xs:14,sm:10,md:10,lg:8,xl:8},Mt={xs:8,sm:6,md:6,lg:4,xl:4},Tt={xs:22,sm:16,md:16,lg:12,xl:12},Lt=function(e){return Object(u.jsx)(D.a,Object(w.a)(Object(w.a)({},Dt),{},{className:e.className}))},Bt=function(e){return Object(u.jsx)(D.a,Object(w.a)(Object(w.a)({},Rt),{},{className:e.className,children:Object(u.jsx)(_t.a,{level:5,children:e.children})}))},Ft=function(e){return Object(u.jsx)(D.a,Object(w.a)(Object(w.a)({},Mt),{},{style:{textAlign:"right"},className:e.className,children:Object(u.jsx)(gt.a,{children:e.children})}))},Qt=function(e){var t=e.totals,n=e.onChangeAdditionalDiscountProductsPercentage,i=e.onChangeAdditionalDiscountInstallPercentage,a=e.onChangePermits,c=e.onChangeSalesTax,r=e.includeInstallation,o=e.readOnly,l=Ct(t.additionalDiscountProductsPercentage).toString(),s=Ct(t.additionalDiscountInstallPercentage).toString(),d=Nt(t.totalPermits).toString(),j=Ct(t.salesTax).toString(),m=function(e){return 0===e?"hide-on-print":""};return Object(u.jsxs)(k.a,{className:"totals-table",gutter:[24,4],children:[t.countImpactProducts>0?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Lt,{}),Object(u.jsx)(Bt,{children:"Total Impact Products"}),Object(u.jsx)(Ft,{children:At(t.totalImpactProducts)})]}):null,t.countStormPanels>0?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Lt,{}),Object(u.jsx)(Bt,{children:"Total Storm Panels"}),Object(u.jsx)(Ft,{children:At(t.totalStormPanels)})]}):null,t.countHardware>0?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Lt,{}),Object(u.jsx)(Bt,{children:"Total Hardware"}),Object(u.jsx)(Ft,{children:At(t.totalHardware)})]}):null,t.countMaterial>0?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Lt,{}),Object(u.jsx)(Bt,{children:"Total Material"}),Object(u.jsx)(Ft,{children:At(t.totalMaterial)})]}):null,t.countDesign>0?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Lt,{}),Object(u.jsx)(Bt,{children:"Total Design"}),Object(u.jsx)(Ft,{children:At(t.totalDesign)})]}):null,r?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Lt,{}),Object(u.jsx)(Bt,{children:"Total Installation"}),Object(u.jsx)(Ft,{children:At(t.totalInstallation)})]}):"",Object(u.jsx)(Lt,{}),Object(u.jsx)(Bt,{children:"Total Other Fees"}),Object(u.jsx)(Ft,{children:At(t.totalOtherFees)}),Object(u.jsx)(Lt,{className:m(t.discountAllProducts)}),Object(u.jsx)(Bt,{className:m(t.discountAllProducts),children:"Product Discounts"}),Object(u.jsx)(Ft,{className:m(t.discountAllProducts),children:At(-t.discountAllProducts)}),r?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Lt,{className:m(t.discountInstallation)}),Object(u.jsx)(Bt,{className:m(t.discountInstallation),children:"Installation Discounts"}),Object(u.jsx)(Ft,{className:m(t.discountInstallation),children:At(-t.discountInstallation)})]}):"",Object(u.jsx)(Lt,{className:m(t.additionalDiscountProducts)}),Object(u.jsxs)(Bt,{className:m(t.additionalDiscountProducts),children:["Additional Product Dsc % ",Object(u.jsx)(gt.a,{editable:!o&&{onChange:function(e){if(!isNaN(Number(e))&&void 0!==n){var i=Number(e)/100;i!==t.additionalDiscountProductsPercentage&&n(i)}}},children:l})]}),Object(u.jsx)(Ft,{className:m(t.additionalDiscountProducts),children:At(-t.additionalDiscountProducts)}),r?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Lt,{className:m(t.additionalDiscountInstall)}),Object(u.jsxs)(Bt,{className:m(t.additionalDiscountInstall),children:["Additional Installation Dsc % ",Object(u.jsx)(gt.a,{editable:!o&&{onChange:function(e){if(!isNaN(Number(e))&&void 0!==i){var n=Number(e)/100;n!==t.additionalDiscountInstallPercentage&&i(n)}}},children:s})]}),Object(u.jsx)(Ft,{className:m(t.additionalDiscountInstall),children:At(-t.additionalDiscountInstall)})]}):"",Object(u.jsx)(Lt,{}),Object(u.jsxs)(Bt,{children:["Permits $",Object(u.jsx)(gt.a,{editable:!o&&{onChange:function(e){var n=Number(e);isNaN(n)||void 0===a||n!==t.totalPermits&&a(n)}},children:d})]}),Object(u.jsx)(Ft,{children:At(t.totalPermits)}),Object(u.jsx)(Lt,{}),Object(u.jsx)(D.a,Object(w.a)(Object(w.a)({},Tt),{},{children:Object(u.jsx)(T.a,{style:{margin:"12px 0px"}})})),Object(u.jsx)(Lt,{}),Object(u.jsx)(Bt,{children:"Subtotal"}),Object(u.jsx)(Ft,{children:At(t.totalBeforeTax)}),Object(u.jsx)(Lt,{}),Object(u.jsxs)(Bt,{children:["Sales Tax %",Object(u.jsx)(gt.a,{editable:!o&&{onChange:function(e){if(!isNaN(Number(e))&&void 0!==c){var n=Number(e)/100;n!==t.salesTax&&c(n)}}},children:j})]}),Object(u.jsx)(Ft,{children:At(t.salesTaxDollars)}),Object(u.jsx)(Lt,{}),Object(u.jsx)(Bt,{children:"Total Amount"}),Object(u.jsx)(Ft,{children:At(t.finalPrice)})]})},Ht=n(95),Ut=n(466),zt=n(467),Wt=n(468),Kt=n(456),Gt=(n(430),function(e){var t=e.item,n=(e.itemIndex,e.onAdd,e.onEdit),i=e.onDelete,a=e.onCopy,c=e.readOnly;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(M.a,{disabled:c,type:"primary",shape:"round",onClick:function(e){return a&&a(e,t)},icon:Object(u.jsx)(Ut.a,{}),style:{marginRight:".5rem"},title:"Copy"}),Object(u.jsx)(M.a,{disabled:c,type:"primary",shape:"round",onClick:function(e){return i&&i(e,t)},icon:Object(u.jsx)(zt.a,{}),style:{marginRight:".5rem"},title:"Delete"}),Object(u.jsx)(M.a,{type:"primary",shape:"round",onClick:function(e){return n&&n(e,t)},icon:Object(u.jsx)(Wt.a,{}),title:"Edit"})]})}),Yt=function(e){var t=e.e,n=e.item,i=e.description,a=e.onUpdateItemNo,c=e.onUpdateQuantity,r=e.readOnly,o=n.modtype===ge.Material?2:1;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(k.a,{gutter:[6,6],className:"product-component",wrap:!1,children:[Object(u.jsxs)(D.a,{xs:1,sm:1,md:1,lg:1,xl:1,children:[Object(u.jsx)("div",{className:"title_container",children:Object(u.jsx)("p",{className:"table_text",children:"#"})}),Object(u.jsx)("div",{className:"context_container",children:Object(u.jsx)(gt.a,{editable:!r&&{onChange:function(e){var t=Number(e);a&&!isNaN(t)&&a(t)}},children:n.itemno})})]}),Object(u.jsxs)(D.a,{xs:6,sm:6,md:6,lg:6,xl:6,children:[Object(u.jsx)("div",{className:"title_container",children:Object(u.jsx)("p",{className:"table_text",children:"Description"})}),Object(u.jsxs)("div",{className:"context_container",children:[Object(u.jsx)("p",{className:"table_text description",children:n.name}),i]})]}),Object(u.jsxs)(D.a,{xs:5,sm:5,md:5,lg:5,xl:5,children:[Object(u.jsx)("div",{className:"title_container",children:Object(u.jsx)("p",{className:"table_text",children:"Image"})}),Object(u.jsx)("div",{className:"context_container",children:Object(u.jsx)(Kt.a,{src:""+n.image,fallback:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg=="})})]}),Object(u.jsxs)(D.a,{xs:o,sm:o,md:o,lg:o,xl:o,children:[Object(u.jsx)("div",{className:"title_container",children:Object(u.jsx)("p",{className:"table_text",children:"Qty"})}),Object(u.jsx)("div",{className:"context_container",children:n.modtype===ge.Material?Object(u.jsx)(gt.a,{editable:!r&&{onChange:function(e){var t=Number(e);c&&!isNaN(t)&&c(t)}},children:n.quantity}):Object(u.jsx)("p",{className:"table_text",children:n.quantity})})]}),Object(u.jsxs)(D.a,{xs:3,sm:3,md:3,lg:3,xl:3,children:[Object(u.jsx)("div",{className:"title_container",children:Object(u.jsx)("p",{className:"table_text",children:"Unit Price"})}),Object(u.jsx)("div",{className:"context_container",children:Object(u.jsx)("p",{className:"table_text",children:At(n.sales_price)})})]}),n.modtype===ge.ImpactProduct?Object(u.jsxs)(D.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:[Object(u.jsx)("div",{className:"title_container",children:Object(u.jsx)("p",{className:"table_text",children:"Colonial"})}),Object(u.jsx)("div",{className:"context_container",children:Object(u.jsx)("p",{className:"table_text",children:At(n.colonial_fee)})})]}):"",[ge.Material,ge.Design].includes(n.modtype)?"":Object(u.jsxs)(D.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:[Object(u.jsx)("div",{className:"title_container",children:Object(u.jsx)("p",{className:"table_text",children:"Install"})}),Object(u.jsx)("div",{className:"context_container",children:Object(u.jsx)("p",{className:"table_text",children:At(t.is_installation_included?n.inst_price:0)})})]}),Object(u.jsx)(D.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:n.sales_discount&&n.sales_discount>0?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"title_container",children:Object(u.jsx)("p",{className:"table_text",children:"Dsc"})}),Object(u.jsx)("div",{className:"context_container",children:Object(u.jsx)("p",{className:"table_text",children:St(n.sales_discount)})})]}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"title_container",children:Object(u.jsx)("p",{className:"table_text",children:"\xa0"})}),Object(u.jsx)("div",{className:"context_container",children:Object(u.jsx)("p",{className:"table_text",children:"\xa0"})})]})}),Object(u.jsxs)(D.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:[Object(u.jsx)("div",{className:"title_container",children:Object(u.jsx)("p",{className:"table_text",children:"Total"})}),Object(u.jsx)("div",{className:"context_container",children:Object(u.jsx)("p",{className:"table_text",children:At(n.finalprice)})})]})]})})},Jt=function(e){var t=e.item,n=Object(Ht.a)(e,["item"]),a=H(mt),c=H(bt)===i.loading||void 0===t.roomtype?"Unknown":function(e){var t;return(null===a||void 0===a?void 0:a.roomtypes)?null===(t=a.roomtypes.find((function(t){return t.value===e})))||void 0===t?void 0:t.label:void 0}(t.roomtype.toString());return Object(u.jsx)(Yt,Object(w.a)({item:t,description:Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("p",{className:"table_text",children:["Screen: ",t.is_screen?"Yes":"No"]}),Object(u.jsxs)("p",{className:"table_text",children:["Size: ",t.widthtxt||"?"," x ",t.heighttxt||"?"," x ",t.lengthtxt||"?"]}),Object(u.jsxs)("p",{className:"table_text",children:["Glass Type: ",t.glass_type]}),Object(u.jsxs)("p",{className:"table_text",children:["Glass Color: ",t.glass_color]}),Object(u.jsxs)("p",{className:"table_text",children:["Interlayer: ",t.interlayer]}),Object(u.jsxs)("p",{className:"table_text",children:["Coating: ",t.coating]}),Object(u.jsxs)("p",{className:"table_text",children:["Type of Room: ",c]}),Object(u.jsxs)("p",{className:"table_text",children:["Room ",t.roomnum]})]})},n))},Xt=function(e){var t=e.e,n=e.item,i=Object(Ht.a)(e,["e","item"]);return Object(u.jsx)(Yt,Object(w.a)({e:t,item:n,description:Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("p",{className:"table_text",children:["Provider: ",n.provider]}),Object(u.jsxs)("p",{className:"table_text",children:["Reference: ",n.product_ref]}),Object(u.jsxs)("p",{className:"table_text",children:["Hardware Type: ",n.hardwaretype]}),Object(u.jsxs)("p",{className:"table_text",children:["Configuration: ",n.configuration]})]})},i))},Zt=function(e,t,n){return e.filter((function(e){return void 0===n||n===e.modtype})).map((function(e){return t(e)})).filter((function(e){return void 0!==e})).reduce((function(e,t){return e+t}),0)},qt=function(e,t,n,i,a){if(e&&e.items){var c=function(e){return e.items?e.items.filter((function(e){return!Z(e._modified)})):[]}(e),r=c.filter((function(e){return e.modtype===ge.ImpactProduct})).length,o=Zt(c,(function(e){return(e.sales_price||0)+function(e){var t=0;if(e.modtype===ge.ImpactProduct){var n=e;n.is_colonial&&(t=n.colonial_fee||0)}return t}(e)}),ge.ImpactProduct),l=e.is_installation_included?Zt(c,(function(e){return e.inst_price}),ge.ImpactProduct):0,s=Zt(c,(function(e){return(e.sales_price||0)*(e.sales_discount||0)}),ge.ImpactProduct),d=e.is_installation_included?Zt(c,(function(e){return(e.inst_price||0)*(e.inst_discount||0)}),ge.ImpactProduct):0,u=c.filter((function(e){return e.modtype===ge.StormPanel})).length,j=Zt(c,(function(e){return e.sales_price}),ge.StormPanel),m=Zt(c,(function(e){return(e.sales_price||0)*(e.sales_discount||0)}),ge.StormPanel),b=e.is_installation_included?Zt(c,(function(e){return e.inst_price}),ge.StormPanel):0,h=e.is_installation_included?Zt(c,(function(e){return(e.inst_price||0)*(e.inst_discount||0)}),ge.StormPanel):0,p=c.filter((function(e){return e.modtype===ge.Hardware})).length,v=Zt(c,(function(e){return e.sales_price}),ge.Hardware),O=Zt(c,(function(e){return(e.sales_price||0)*(e.sales_discount||0)}),ge.Hardware),f=e.is_installation_included?Zt(c,(function(e){return e.inst_price}),ge.Hardware):0,x=e.is_installation_included?Zt(c,(function(e){return(e.inst_price||0)*(e.inst_discount||0)}),ge.Hardware):0,g=c.filter((function(e){return e.modtype===ge.Material})).length,y=Zt(c,(function(e){return(e.sales_price||0)*(e.quantity||1)}),ge.Material),_=Zt(c,(function(e){return(e.sales_price||0)*(e.quantity||1)*(e.sales_discount||0)}),ge.Material),w=c.filter((function(e){return e.modtype===ge.Design})).length,N=Zt(c,(function(e){return(e.sales_price||0)*(e.quantity||1)}),ge.Design),C=Zt(c,(function(e){return(e.sales_price||0)*(e.quantity||1)*(e.sales_discount||0)}),ge.Design),A=e.is_installation_included?Zt(c,(function(e){return e.inst_price})):0,E=e.is_installation_included?Zt(c,(function(e){return(e.inst_price||0)*(e.inst_discount||0)})):0,S=Zt(c,(function(e){return e.sales_price})),I=Zt(c,(function(e){return e.otherfees})),P=Zt(c,(function(e){return(e.sales_price||0)*(e.sales_discount||0)})),k=S*t,D=A*n,R=S+I-P+A-E-k-D+i,M=(S-P-k)*(a||0);return{countImpactProducts:r,totalImpactProducts:o,instImpactProducts:l,discountImpactProducts:s,discountInstImpactProducts:d,countStormPanels:u,totalStormPanels:j,discountStormPanels:m,instStormPanels:b,discountInstStormPanels:h,countHardware:p,totalHardware:v,discountHardware:O,instHardware:f,discountInstHardware:x,countMaterial:g,totalMaterial:y,discountMaterial:_,countDesign:w,totalDesign:N,discountDesign:C,discountAllProducts:P,totalInstallation:A,discountInstallation:E,totalOtherFees:I,totalDiscount:P+E,additionalDiscountProductsPercentage:t,additionalDiscountProducts:k,additionalDiscountInstallPercentage:n,additionalDiscountInstall:D,totalPermits:i,totalBeforeTax:R,salesTax:a,salesTaxDollars:M,finalPrice:Nt(R+M)}}return{countImpactProducts:0,totalImpactProducts:0,instImpactProducts:0,discountImpactProducts:0,discountInstImpactProducts:0,countStormPanels:0,totalStormPanels:0,discountStormPanels:0,instStormPanels:0,discountInstStormPanels:0,countHardware:0,totalHardware:0,discountHardware:0,instHardware:0,discountInstHardware:0,countMaterial:0,totalMaterial:0,discountMaterial:0,countDesign:0,totalDesign:0,discountDesign:0,discountAllProducts:0,totalInstallation:0,discountInstallation:0,totalOtherFees:0,totalDiscount:0,additionalDiscountProductsPercentage:0,additionalDiscountProducts:0,additionalDiscountInstallPercentage:0,additionalDiscountInstall:0,totalPermits:0,totalBeforeTax:0,salesTax:0,salesTaxDollars:0,finalPrice:0}},Vt=n(470),$t=n(471),en=n(472),tn=n(473),nn=n(474),an=n(475),cn=n(476),rn=(Ie={},Object(me.a)(Ie,ke.CasementWindowSeries,{minWidth:0,minHeight:36.75}),Object(me.a)(Ie,ke.FixedGlass,{minWidth:0,minHeight:0}),Object(me.a)(Ie,ke.FrenchDoor,{minWidth:0,minHeight:0}),Object(me.a)(Ie,ke.HorizontalRollingSeries,{minWidth:52.375,minHeight:0}),Object(me.a)(Ie,ke.SingleHungSeries,{minWidth:0,minHeight:56.75}),Object(me.a)(Ie,ke.SlidingDoor,{minWidth:0,minHeight:0}),Ie),on={msg:"Validating...",link:"",type:"info"},ln=function(e,t){var n=[];return n.push.apply(n,Object(je.a)(function(e,t){var n,i=[],a=t.roomType2Id("Bedroom");if(!a)return[on];var c=null===e||void 0===e||null===(n=e.items)||void 0===n?void 0:n.filter((function(e){return!Z(e._modified)&&e.modtype===ge.ImpactProduct})).map((function(e){return e})),r=null===c||void 0===c?void 0:c.reduce((function(e,t){return t.roomtype||t.roomnum&&!e.includes(t.roomnum)&&e.push(t.roomnum),e}),[]);r&&r.length>0&&i.push({msg:"Some rooms are missing a type - so we can't confirm if escape openings are required. Please check room numbers: ".concat(r),link:"",type:"warning"});var o=null===c||void 0===c?void 0:c.filter((function(e){var t;return(null===(t=e.roomtype)||void 0===t?void 0:t.toString())===a})),l=null===o||void 0===o?void 0:o.reduce((function(e,t){return(void 0===t.roomnum||t.roomnum<=0)&&e++,e}),0);l&&l>0&&i.push({msg:"".concat(l," rooms are missing a room number so we can't check for escape openings."),link:"",type:"warning"});var s=null===o||void 0===o?void 0:o.filter((function(e){return void 0!==e.roomnum&&e.roomnum>0})),d=null===s||void 0===s?void 0:s.reduce((function(e,t){return t.roomnum&&!e.includes(t.roomnum)&&e.push(t.roomnum),e}),[]),u=null===s||void 0===s?void 0:s.reduce((function(e,t){if(t.wintype&&t.roomnum&&!e.includes(t.roomnum)){var n=rn[t.wintype];n&&t.width&&t.width>=n.minWidth&&t.height&&t.height>=n.minHeight&&e.push(t.roomnum)}return e}),[]),j=null===d||void 0===d?void 0:d.filter((function(e){return!(null===u||void 0===u?void 0:u.includes(e))}));return null===j||void 0===j||j.forEach((function(e){return i.push({msg:"Room ".concat(e," is missing an escape opening."),link:"",type:"error"})})),i}(e,t))),n.push.apply(n,Object(je.a)(function(e,t){var n,i=[],a=t.roomType2Id("Bathroom");if(!a)return[on];var c=null===e||void 0===e||null===(n=e.items)||void 0===n?void 0:n.filter((function(e){return!Z(e._modified)&&e.modtype===ge.ImpactProduct})).map((function(e){return e})),r=null===c||void 0===c?void 0:c.filter((function(e){var t;return(null===(t=e.roomtype)||void 0===t?void 0:t.toString())===a})),o=null===r||void 0===r?void 0:r.filter((function(e){var t;return"CLEAR"===(null===(t=e.interlayer)||void 0===t?void 0:t.toString())})),l=null===o||void 0===o?void 0:o.reduce((function(e,t){return t.roomnum&&!e.includes(t.roomnum)&&e.push(t.roomnum),e}),[]);return l&&l.length>0&&i.push({msg:"Some bathrooms have clear openings. Please confirm with client or check room numbers: ".concat(l),link:"",type:"warning"}),i}(e,t))),n.push.apply(n,Object(je.a)(function(e,t){return t.roomType2Id("Bedroom")?[]:[on]}(0,t))),n},sn=n(82),dn=n.n(sn);var un,jn=function(e,t){Object(c.useEffect)((function(){var n=function(n){(e&&we(e)||t&&X(t._modified))&&(n.preventDefault(),n.returnValue="Please save your changes first.")};return window.addEventListener("beforeunload",n),function(){window.removeEventListener("beforeunload",n)}}),[e,t])},mn=n(469),bn=n(136),hn=n(154),pn=function(e){var t=e.readOnly,n=Q(),i=H(ct),a=i&&void 0!==i.deposit_percent?i.deposit_percent:0,r=i&&void 0!==i.deposit_percent_with_install?i.deposit_percent_with_install:0,o=i&&void 0!==i.percent_final_inspection?i.percent_final_inspection:0,l=i&&void 0!==i.warranty_years?i.warranty_years:0,s=Object(c.useState)(5),d=Object(N.a)(s,2),j=d[0],m=d[1],b=!(!i||void 0===i.new_construction_owner_responsability)&&i.new_construction_owner_responsability,h=!(!i||void 0===i.pay_upon_completion)&&i.pay_upon_completion,p=function(e){return 0===e?"hide-on-print":""},v=function(e){return!1===e||0===e?"hide-on-print":""};Object(c.useEffect)((function(){i?(i.warranty_years||5===j||m(5),i.warranty_years&&j!==i.warranty_years&&m(Number(i.warranty_years||0))):m(5)}),[i,j]);var O=function(e){i&&n($e(Object(w.a)(Object(w.a)({},i),{},{warranty_years:e})))},f=a>0||r>0||o>0||l>0||b||h,x={style:{marginTop:".2em"}},g=function(){return Object(u.jsx)(mn.a,{style:{margin:"0 1em 0 1em"},twoToneColor:"#aaaaaa"})};return Object(u.jsxs)(B.b,{size:[0,0],direction:"vertical",align:"center",style:{width:"100%"},className:"estimate-options "+v(f),children:[Object(u.jsx)(_t.a,{level:4,children:"Conditions"}),Object(u.jsxs)("div",{style:{textAlign:"center"},children:[Object(u.jsx)(g,{}),Object(u.jsxs)(B.b,Object(w.a)(Object(w.a)({},x),{},{direction:"horizontal",style:{whiteSpace:"nowrap"},className:p(a),onClick:function(e){return!t&&i&&n($e(Object(w.a)(Object(w.a)({},i),{},{deposit_percent:i.deposit_percent&&i.deposit_percent>0?0:50})))},children:[Object(u.jsxs)(_t.a,{style:{marginBottom:"2px"},level:5,children:[50,"% Deposit"]}),Object(u.jsx)(bn.a,{checked:a>0,onChange:function(e){return i&&n($e(Object(w.a)(Object(w.a)({},i),{},{deposit_percent:e.target.checked?50:0})))},disabled:t}),Object(u.jsx)(g,{})]})),Object(u.jsxs)(B.b,Object(w.a)(Object(w.a)({},x),{},{direction:"horizontal",style:{whiteSpace:"nowrap"},className:p(r),onClick:function(e){return!t&&i&&n($e(Object(w.a)(Object(w.a)({},i),{},{deposit_percent_with_install:i.deposit_percent_with_install&&i.deposit_percent_with_install>0?0:40})))},children:[Object(u.jsxs)(_t.a,{style:{marginBottom:"2px"},level:5,children:[40,"% Deposit With Installation"]}),Object(u.jsx)(bn.a,{checked:r>0,onChange:function(e){return i&&n($e(Object(w.a)(Object(w.a)({},i),{},{deposit_percent_with_install:e.target.checked?40:0})))},disabled:t}),Object(u.jsx)(g,{})]})),Object(u.jsxs)(B.b,Object(w.a)(Object(w.a)({},x),{},{direction:"horizontal",style:{whiteSpace:"nowrap"},className:p(o),onClick:function(e){return!t&&i&&n($e(Object(w.a)(Object(w.a)({},i),{},{percent_final_inspection:i.percent_final_inspection&&i.percent_final_inspection>0?0:10})))},children:[Object(u.jsxs)(_t.a,{style:{marginBottom:"2px"},level:5,children:[10,"% Final Inspection"]}),Object(u.jsx)(bn.a,{checked:o>0,onChange:function(e){return i&&n($e(Object(w.a)(Object(w.a)({},i),{},{percent_final_inspection:e.target.checked?10:0})))},disabled:t}),Object(u.jsx)(g,{})]})),Object(u.jsxs)(B.b,Object(w.a)(Object(w.a)({},x),{},{direction:"horizontal",style:{whiteSpace:"nowrap"},className:p(l),children:[Object(u.jsxs)(hn.a,{size:"small",value:j,onChange:function(e){O(Number(e))},disabled:t,onClick:function(e){return e.preventDefault()},children:[Object(u.jsx)(hn.a.Option,{value:"10",children:"10"}),Object(u.jsx)(hn.a.Option,{value:"5",children:"5"})]}),Object(u.jsx)(_t.a,{style:{marginBottom:"2px",cursor:"pointer"},onClick:function(){return!t&&function(e){if(i){var t=i.warranty_years&&i.warranty_years>0?0:e;n($e(Object(w.a)(Object(w.a)({},i),{},{warranty_years:t})))}}(j)},level:5,children:"Years Warranty"}),Object(u.jsx)(bn.a,{checked:l>0,onChange:function(e){return O(e.target.checked?j:0)},disabled:t}),Object(u.jsx)(g,{})]})),Object(u.jsxs)(B.b,Object(w.a)(Object(w.a)({},x),{},{direction:"horizontal",style:{whiteSpace:"nowrap"},className:v(b),onClick:function(e){return!t&&i&&n($e(Object(w.a)(Object(w.a)({},i),{},{new_construction_owner_responsability:!i.new_construction_owner_responsability})))},children:[Object(u.jsx)(_t.a,{style:{marginBottom:"2px"},level:5,children:"New construction the buck is owner responsibility"}),Object(u.jsx)(bn.a,{checked:null===i||void 0===i?void 0:i.new_construction_owner_responsability,onChange:function(e){return i&&n($e(Object(w.a)(Object(w.a)({},i),{},{new_construction_owner_responsability:e.target.checked})))},disabled:t}),Object(u.jsx)(g,{})]})),Object(u.jsxs)(B.b,Object(w.a)(Object(w.a)({},x),{},{direction:"horizontal",style:{whiteSpace:"nowrap"},className:v(h),onClick:function(e){return!t&&i&&n($e(Object(w.a)(Object(w.a)({},i),{},{pay_upon_completion:!i.pay_upon_completion})))},children:[Object(u.jsx)(_t.a,{level:5,children:"Pay after job is complete"}),Object(u.jsx)(bn.a,{checked:null===i||void 0===i?void 0:i.pay_upon_completion,onChange:function(e){return i&&n($e(Object(w.a)(Object(w.a)({},i),{},{pay_upon_completion:e.target.checked})))},disabled:t}),Object(u.jsx)(g,{})]}))]})]})},vn=n(152),On=n.n(vn),fn=n(461),xn=n(260),gn=[{id:"5",name:"ALUMINUM",hex:"#D0D5DB"},{id:"11",name:"AZURE",hex:"#007FFF"},{id:"1",name:"BEIGE",hex:"#E1C699"},{id:"2",name:"BRONZE",hex:"#B08D57"},{id:"7",name:"CLEAR",hex:"transparent"},{id:"10",name:"CLEAR ANODIZE",hex:"transparent"},{id:"12",name:"GRAY",hex:"#808080"},{id:"3",name:"IVORY",hex:"#FFFFF0"},{id:"4",name:"MILL FINISH",hex:"#B0B3B7"},{id:"9",name:"NONE",hex:"transparent"},{id:"8",name:"NONE",hex:"transparent"},{id:"6",name:"WHITE",hex:"#FFFFFF"}],yn=function(e){var t,n,i,a,c,r,o,l,s,d,j,m,b,h,p,v,O,f,x,g=e.estimate,y=e.customerNames,_=e.onChangeCustomer,N=e.onUpdateEstimate,C=e.isLoading,A=e.isFailed,E=e.defaults,S=e.readOnly,I=function(e){return gn.find((function(t){return t.id===e}))},P=null===g||void 0===g||null===(t=g.defcolor)||void 0===t?void 0:t.toUpperCase(),R=P&&(null===(n=gn.find((function(e){return e.name===P})))||void 0===n?void 0:n.hex),M=null===g||void 0===g||null===(i=g.defglasscolor)||void 0===i?void 0:i.toUpperCase(),L=M&&(null===(a=gn.find((function(e){return e.name===M})))||void 0===a?void 0:a.hex),B=Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(_t.a,{level:5,children:"Frame Color"}),Object(u.jsx)(hn.a,{showSearch:!0,className:"input show1",optionFilterProp:"label",onChange:function(e){var t;g&&N(Object(w.a)(Object(w.a)({},g),{},{defcolor:null===(t=I(e))||void 0===t?void 0:t.name}))},filterOption:function(e,t){return!(null===t||void 0===t?void 0:t.label)||t.label.toString().toLowerCase().indexOf(e.toLowerCase())>=0},options:null===E||void 0===E?void 0:E.colors,value:null===g||void 0===g||null===(c=g.defcolor)||void 0===c?void 0:c.toUpperCase(),disabled:S})]}),F=Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(_t.a,{level:5,children:"Glass Color"}),Object(u.jsx)(hn.a,{showSearch:!0,className:"input show1",optionFilterProp:"label",onChange:function(e){var t;g&&N(Object(w.a)(Object(w.a)({},g),{},{defglasscolor:null===(t=I(e))||void 0===t?void 0:t.name}))},filterOption:function(e,t){return!(null===t||void 0===t?void 0:t.label)||t.label.toString().toLowerCase().indexOf(e.toLowerCase())>=0},options:null===E||void 0===E?void 0:E.colors,value:null===g||void 0===g||null===(r=g.defglasscolor)||void 0===r?void 0:r.toUpperCase(),disabled:S})]});return R&&(B=Object(u.jsx)(fn.a.Ribbon,{text:P,color:R,children:B})),L&&(F=Object(u.jsx)(fn.a.Ribbon,{text:M,color:L,children:F})),Object(u.jsxs)(k.a,{className:"customer-info",gutter:[24,24],children:[Object(u.jsxs)(D.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:[Object(u.jsx)(_t.a,{level:5,children:"Customer Name"}),Object(u.jsx)(hn.a,{showSearch:!0,className:"input show1",optionFilterProp:"label",onChange:function(e){_(e.toString())},filterOption:function(e,t){return!(null===t||void 0===t?void 0:t.label)||t.label.toString().toLowerCase().indexOf(e.toLowerCase())>=0},options:y,value:null===g||void 0===g||null===(o=g.customer)||void 0===o?void 0:o.customername,loading:C,disabled:S}),A?Object(u.jsx)(Vt.a,{style:{marginLeft:"1rem",display:"flex",alignSelf:"center"}}):null,Object(u.jsx)(_t.a,{level:5,children:"Relationship Type"}),Object(u.jsx)(xn.a,{className:"input show2",placeholder:"Relationship Type",disabled:!0,value:(x=null===g||void 0===g||null===(l=g.customer)||void 0===l?void 0:l.reltype,x?ee[x]:"None")}),Object(u.jsx)(T.a,{style:{marginTop:"0px"}}),Object(u.jsx)(_t.a,{level:5,children:"Estimate Number"}),Object(u.jsx)(xn.a,{className:"input show2",placeholder:"Estimate Number",disabled:!0,value:null===g||void 0===g?void 0:g.estimatenum}),Object(u.jsx)(_t.a,{level:5,children:"Customer Name"}),Object(u.jsx)(xn.a,{className:"input show4",placeholder:"Customer Name",disabled:!0,value:null===g||void 0===g||null===(s=g.customer)||void 0===s?void 0:s.customername}),Object(u.jsx)(_t.a,{level:5,children:"Customer Address"}),Object(u.jsx)(xn.a,{className:"input show3",placeholder:"Customer Address",disabled:!0,value:null===g||void 0===g||null===(d=g.customer)||void 0===d?void 0:d.customeraddress}),Object(u.jsx)(_t.a,{level:5,children:"Customer Phone"}),Object(u.jsx)(xn.a,{className:"input show3",placeholder:"Customer Phone",disabled:!0,value:kt(null===g||void 0===g||null===(j=g.customer)||void 0===j?void 0:j.customerphone)}),Object(u.jsx)(_t.a,{level:5,children:"Customer Mobile"}),Object(u.jsx)(xn.a,{className:"input show3",placeholder:"Customer Mobile",disabled:!0,value:kt(null===g||void 0===g||null===(m=g.customer)||void 0===m?void 0:m.customermobile)})]}),Object(u.jsxs)(D.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:[Object(u.jsx)(_t.a,{level:5,children:"Contact Name"}),Object(u.jsx)(xn.a,{className:"input show1",placeholder:"Contact Name",disabled:!0,value:null===g||void 0===g||null===(b=g.customer)||void 0===b?void 0:b.contactname}),Object(u.jsx)(_t.a,{level:5,children:"Contact Address"}),Object(u.jsx)(xn.a,{className:"input show3",placeholder:"Contact Address",disabled:!0,value:null===g||void 0===g||null===(h=g.customer)||void 0===h?void 0:h.contactaddress}),Object(u.jsx)(_t.a,{level:5,children:"Contact Phone"}),Object(u.jsx)(xn.a,{className:"input show2",placeholder:"Contact Phone",disabled:!0,value:kt(null===g||void 0===g||null===(p=g.customer)||void 0===p?void 0:p.contactphone)}),Object(u.jsx)(_t.a,{level:5,children:"Contact Mobile"}),Object(u.jsx)(xn.a,{className:"input show4",placeholder:"Contact Mobile",disabled:!0,value:kt(null===g||void 0===g||null===(v=g.customer)||void 0===v?void 0:v.contactmobile)}),Object(u.jsx)(_t.a,{level:5,children:"E-Mail"}),Object(u.jsx)(xn.a,{className:"input show2",placeholder:"E-Mail",disabled:!0,value:null===g||void 0===g||null===(O=g.customer)||void 0===O?void 0:O.customeremail}),Object(u.jsx)(_t.a,{level:5,children:"Salesperson"}),Object(u.jsx)(xn.a,{className:"input show4",placeholder:"Salesperson",disabled:!0,value:(null===g||void 0===g?void 0:g.vendor)+((null===g||void 0===g?void 0:g.vendor_phone)?" ("+kt(null===g||void 0===g?void 0:g.vendor_phone)+")":"")}),Object(u.jsx)(_t.a,{level:5,children:"Folio #"}),Object(u.jsx)(xn.a,{className:"input show4",placeholder:"Folio #",disabled:!0,value:null===g||void 0===g||null===(f=g.customer)||void 0===f?void 0:f.folionumber})]}),Object(u.jsx)(D.a,{xxl:24,children:Object(u.jsxs)("div",{className:"flex_container show3",children:[Object(u.jsx)(bn.a,{checked:null===g||void 0===g?void 0:g.is_installation_included,onChange:function(e){g&&N(Object(w.a)(Object(w.a)({},g),{},{is_installation_included:e.target.checked}))},disabled:S,children:Object(u.jsx)(_t.a,{level:5,children:"Include installation services"})}),Object(u.jsx)(bn.a,{checked:null===g||void 0===g?void 0:g.is_alteration,onChange:function(e){g&&N(Object(w.a)(Object(w.a)({},g),{},{is_alteration:e.target.checked}))},disabled:S,children:Object(u.jsx)(_t.a,{level:5,children:"Alteration"})})]})}),Object(u.jsx)(D.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:B}),Object(u.jsx)(D.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:F})]})},_n=n(454),wn=[{title:"Label1",dataIndex:"label1",key:"label1",render:function(e){return Object(u.jsx)("b",{style:{whiteSpace:"nowrap",verticalAlign:"top"},children:e})},align:"left",className:"CCDLabel"},{title:"Value1",dataIndex:"value1",key:"value1",render:function(e){return Object(u.jsx)("b",{style:{verticalAlign:"top"},children:e})},className:"CCDValue",onCell:function(e,t){return{colSpan:0===t?3:1}}},{title:"Label2",dataIndex:"label2",key:"label2",render:function(e){return Object(u.jsx)("b",{style:{whiteSpace:"nowrap",verticalAlign:"top"},children:e})},align:"left",className:"CCDLabel",onCell:function(e,t){return{colSpan:0===t?0:1}}},{title:"Value2",dataIndex:"value2",key:"value2",render:function(e){return Object(u.jsx)("b",{style:{verticalAlign:"top"},children:e})},className:"CCDValue",onCell:function(e,t){return{colSpan:0===t?0:1}}}],Nn=function(e){var t,n,i,a,c,r,o,l,s,d,j,m,b,h,p,v,O,f=e.estimate,x=(e.isFailed,[]),g=[],y=function(e,t){return{label1:e?e+":":"",value1:t}},_=function(e,t){return{label2:e?e+":":"",value2:t}},N=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(t||n)&&x.push(y(e,t||""))},C=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(t||n)&&g.push(_(e,t||""))},A=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(t||n)&&(x.length>g.length?g.push(_(e,t||"")):x.push(y(e,t||"")))};N("Estimate #",null===f||void 0===f?void 0:f.estimatenum,!0),N("Customer Phone",kt(null===f||void 0===f||null===(t=f.customer)||void 0===t?void 0:t.customerphone)),N("Customer Mobile",kt(null===f||void 0===f||null===(n=f.customer)||void 0===n?void 0:n.customermobile)),N("Customer E-Mail",null===f||void 0===f||null===(i=f.customer)||void 0===i?void 0:i.customeremail),function(e){var t=[],n="";return e.forEach((function(e,i){"\n"===(e=e||"")?""!==n&&(t.push(n.trim()+e),n=""):","===e?""===n||n.endsWith(", ")||(n+=", "):""!==e&&(""===n||n.endsWith(" ")||(n+=" "),n+=e)})),""!==n&&t.push(n.trim()),t.join("")}([null===f||void 0===f||null===(a=f.customer)||void 0===a?void 0:a.customeraddress,",","\n",null===f||void 0===f||null===(c=f.customer)||void 0===c?void 0:c.customercity,",","\n",null===f||void 0===f||null===(r=f.customer)||void 0===r?void 0:r.customerstate,null===f||void 0===f||null===(o=f.customer)||void 0===o?void 0:o.customerzip]).split("\n").forEach((function(e,t){return C(0===t?"Customer Address":"",e)})),C("Folio #",null===f||void 0===f||null===(l=f.customer)||void 0===l?void 0:l.folionumber),C("Salesperson",(null===f||void 0===f?void 0:f.vendor)+((null===f||void 0===f?void 0:f.vendor_phone)?" ("+kt(null===f||void 0===f?void 0:f.vendor_phone)+")":"")),A("Contact Name",null===f||void 0===f||null===(s=f.customer)||void 0===s?void 0:s.contactname),A("Contact Address",null===f||void 0===f||null===(d=f.customer)||void 0===d?void 0:d.contactaddress),A("Contact Phone",kt(null===f||void 0===f||null===(j=f.customer)||void 0===j?void 0:j.contactphone)),A("Contact Mobile",kt(null===f||void 0===f||null===(m=f.customer)||void 0===m?void 0:m.contactmobile)),A("Relationship Type",(O=null===f||void 0===f||null===(b=f.customer)||void 0===b?void 0:b.reltype)?ee[O]:"None"),A("Frame Color",null===f||void 0===f||null===(h=f.defcolor)||void 0===h?void 0:h.toUpperCase()),A("Glass Color",null===f||void 0===f||null===(p=f.defglasscolor)||void 0===p?void 0:p.toUpperCase());for(var E=[{key:"cn",label1:"Customer Name:",value1:(null===f||void 0===f||null===(v=f.customer)||void 0===v?void 0:v.customername)||"",label2:" ",value2:" "}],S=0;x.length>S||g.length>S;){var I={key:""+S,label1:" ",value1:" ",label2:"",value2:""};x.length>S&&(I=Object(w.a)(Object(w.a)({},I),{},{label1:x[S].label1,value1:x[S].value1})),g.length>S&&(I=Object(w.a)(Object(w.a)({},I),{},{label2:g[S].label2,value2:g[S].value2})),E.push(I),S++}var P=!(null===f||void 0===f?void 0:f.is_installation_included),R=!(null===f||void 0===f?void 0:f.is_alteration),M=P&&R;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(k.a,{className:"customer-info",gutter:[24,24],children:[Object(u.jsx)(D.a,{xl:24,children:Object(u.jsx)(_n.a,{dataSource:E,columns:wn,showHeader:!1,pagination:!1,size:"small",rowClassName:function(e,t){return 0===t?"table-row-customername":""}})}),Object(u.jsx)(D.a,{className:M?"hide-on-print":"",children:Object(u.jsxs)("div",{className:"flex_container show3",children:[Object(u.jsx)(bn.a,{checked:null===f||void 0===f?void 0:f.is_installation_included,disabled:!0,className:P?"hide-on-print":"",children:Object(u.jsx)(_t.a,{level:5,children:"Include installation services"})}),Object(u.jsx)(bn.a,{checked:null===f||void 0===f?void 0:f.is_alteration,disabled:!0,className:R?"hide-on-print":"",children:Object(u.jsx)(_t.a,{level:5,children:"Alteration"})})]})})]})})},Cn=[{title:"Label",dataIndex:"label",key:"label",render:function(e){return Object(u.jsx)("b",{style:{whiteSpace:"nowrap",verticalAlign:"top"},children:e})},align:"right",className:"CCDLabel",width:300},{title:"Value",dataIndex:"value",key:"value",className:"CCDValue",width:100}],An=function(e){var t=e.totals,n=e.includeInstallation,i=Ct(t.salesTax).toString(),a=[],c=function(e,t){t&&a.push({label:e+":",value:At(t),key:e})},r=function(e,t){a.push({label:e+":",value:At(t||0),key:e})};c("Total Impact Products",t.totalImpactProducts),c("Total Storm Panels",t.totalStormPanels),c("Total Hardware",t.totalHardware),c("Total Material",t.totalMaterial),c("Total Design",t.totalDesign),n&&c("Total Installation",t.totalInstallation),c("Total Other Fees",t.totalOtherFees),c("Product Discounts",-t.discountAllProducts),n&&c("Installation Discounts",-t.discountInstallation),c("Additional Product Dsc",-t.additionalDiscountProducts),c("Additional Installation Dsc",-t.additionalDiscountInstall),r("Permits",t.totalPermits),r("Subtotal",t.totalBeforeTax),r("Sales Tax %"+i,t.salesTaxDollars),r("Total Amount",t.finalPrice);var o=a.splice(0,a.length/2);return Object(u.jsxs)(k.a,{className:"customer-info",gutter:[24,24],children:[Object(u.jsx)(D.a,{md:12,children:Object(u.jsx)(_n.a,{dataSource:o,columns:Cn,showHeader:!1,pagination:!1,size:"small",className:"totals-table"})}),Object(u.jsx)(D.a,{md:12,children:Object(u.jsx)(_n.a,{dataSource:a,columns:Cn,showHeader:!1,pagination:!1,size:"small",className:"totals-table"})})]})},En={_modified:a.new,color:"",cost_price:0,estimateid:0,finalprice:0,id:0,image:"",inst_discount:0,inst_price:0,itemno:1,itemtype:Se.None,modtype:ge.ImpactProduct,name:"",notes:"",otherfees:0,quantity:1,sales_discount:0,sales_price:0,wintype:ke.None},Sn=Object(w.a)(Object(w.a)({},En),{},{itemtype:Se.Hardware,modtype:ge.Material}),In=function(e,t,n){if(t){var i=Math.round(100*((t.cost_price||0)+(t.cost_price||0)*ne(null===n||void 0===n?void 0:n.reltype)))/100;return{sales_price:i,finalprice:(i-(t.cost_price||0)*(t.sales_discount||0)+(e.is_installation_included?(t.inst_price||0)-(t.inst_price||0)*(t.inst_discount||0):0))*(t.quantity||1)}}return{sales_price:0,finalprice:0}},Pn=Object(w.a)(Object(w.a)({},En),{},{itemtype:Se.Hardware,modtype:ge.Design}),kn=function(e,t,n){if(t){var i=Math.round(100*((t.cost_price||0)+(t.cost_price||0)*ne(null===n||void 0===n?void 0:n.reltype)))/100;return{sales_price:i,finalprice:i-(t.cost_price||0)*(t.sales_discount||0)+(e.is_installation_included?(t.inst_price||0)-(t.inst_price||0)*(t.inst_discount||0):0)}}return{sales_price:0,finalprice:0}},Dn=function(e){var t=e.item,n=Object(Ht.a)(e,["item"]);return Object(u.jsx)(Yt,Object(w.a)({item:t,description:Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("p",{className:"table_text",children:["Size: ",t.widthtxt||"?"," x ",t.heighttxt||"?"," x ",t.lengthtxt||"?"]}),Object(u.jsxs)("p",{className:"table_text",children:["Color: ",t.color]})]})},n))},Rn=function(e){var t=e.item,n=Object(Ht.a)(e,["item"]);return Object(u.jsx)(Yt,Object(w.a)({item:t,description:Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("p",{className:"table_text",children:["Size: ",t.widthtxt||"?"," x ",t.heighttxt||"?"]}),Object(u.jsxs)("p",{className:"table_text",children:["Color: ",t.color]})]})},n))},Mn=C.a.Title,Tn=C.a.Text,Ln=function(e){if(!Bn(e))for(var t in e)if(e[t]===i.loading)return!0;return!1},Bn=function(e){for(var t in e)if(e[t]===i.failed)return!0;return!1},Fn=function(e,t,n){var i;e.error?(console.error(e.error),A.a.error({message:t,description:e.error.message,duration:10})):((null===(i=e.payload)||void 0===i?void 0:i.id)&&n.replace("/".concat(e.payload.id)),A.a.success({message:t,description:"Success!",duration:10}))},Qn="",Hn=function(e){var t,n=e.viewMenu,r=e.readOnly,o=Q(),l=H(oe),s=H(se),d=H(mt),j=H(ht),m=H(pt),h=H(ct),p=Object(b.h)(),v=Object(c.useState)(!1),O=Object(N.a)(v,2),f=O[0],x=O[1],_=Object(b.f)(),C=Object(c.useState)([]),F=Object(N.a)(C,2),U=F[0],z=F[1],W=Object(c.useState)([]),K=Object(N.a)(W,2),G=K[0],J=K[1],q=H(le),V=H(de),$=H(rt),ee=H(ot),te=H(bt),ne=Object(c.useMemo)((function(){return{customer:q,customerDetail:V,estimate:$,estimateError:ee,default:te}}),[q,V,te,$,ee]);Bn(ne)&&""===Qn&&(Qn=ne.estimateError,E.b.error(ne.estimateError,void 0,(function(){Qn=""})));var ie=Object(c.useState)(void 0),re=Object(N.a)(ie,2),ue=re[0],je=re[1],me=void 0;s&&ue&&s[ue]&&(me=s[ue]),Object(c.useEffect)((function(){var e,t,n;!me||void 0===h||void 0!==(null===h||void 0===h?void 0:h.customer)&&(null===h||void 0===h||null===(e=h.customer)||void 0===e?void 0:e.id)===(null===(t=me)||void 0===t?void 0:t.id)||o($e(Object(w.a)(Object(w.a)({},h),{},{customer:me,customerid:Number(null===(n=me)||void 0===n?void 0:n.id)})))}),[me,h,o]),Object(c.useEffect)((function(){void 0===h&&(null===d||void 0===d?void 0:d.user.name)&&(p.eid?o(Ke(Number(p.eid))):o(Ve(ye(d.user.name,d.user.phone,0))))}),[o,p.eid,h,null===d||void 0===d?void 0:d.user.name,null===d||void 0===d?void 0:d.user.phone]),Object(c.useEffect)((function(){void 0!==l&&0!==l.length||o(ae())}),[o,l]),Object(c.useEffect)((function(){0===(null===d||void 0===d?void 0:d.colors.length)&&o(ut())}),[o,d]),Object(c.useEffect)((function(){ue&&o(ce(ue))}),[o,ue]),Object(c.useEffect)((function(){h&&z(ln(h,{id2RoomType:j,roomType2Id:m}))}),[o,h,j,m]),jn(h);var be=function(e,t){e&&e.stopPropagation(),x(!0)},xe=null;h&&(xe={onAdd:function(e,t){return h&&be(e)},onEdit:function(e,t){return h&&function(e,t){switch(e&&e.stopPropagation(),t.modtype){case ge.ImpactProduct:_.push("/impact/".concat(null===h||void 0===h?void 0:h.id,"/").concat(t.id));break;case ge.Hardware:_.push("/hardware/".concat(null===h||void 0===h?void 0:h.id,"/").concat(t.id));break;case ge.Material:_.push("/material/".concat(null===h||void 0===h?void 0:h.id,"/").concat(t.id));break;case ge.Design:_.push("/design/".concat(null===h||void 0===h?void 0:h.id,"/").concat(t.id))}}(e,t)},onDelete:function(e,t){return h&&function(e,t,n,i){t(nt(i)),e&&e.stopPropagation()}(e,o,0,t)},onCopy:function(e,t){return h&&function(e,t,n,i){t(it(i)),e&&e.stopPropagation()}(e,o,0,t)}});var Ne=Object(c.useCallback)((function(e){var t=e.item,n=e.readOnly,i=function(e){return o(tt(Object(w.a)(Object(w.a)({},t),{},{itemno:e})))},a=function(e){return o(tt(Object(w.a)(Object(w.a)({},t),{},{quantity:e||1,finalprice:t.sales_price})))};if(xe&&h)switch(t.modtype){case ge.ImpactProduct:return Object(u.jsx)(Jt,{readOnly:n,e:h,item:t,onUpdateQuantity:a,onUpdateItemNo:i});case ge.Hardware:return Object(u.jsx)(Xt,{readOnly:n,e:h,item:t,onUpdateQuantity:a,onUpdateItemNo:i});case ge.Material:return Object(u.jsx)(Dn,{readOnly:n,e:h,item:t,onUpdateQuantity:function(e){e=e||1;var n=Object(w.a)(Object(w.a)({},t),{},{quantity:e});n=Object(w.a)(Object(w.a)({},n),{},{finalprice:In(h,n,h.customer).finalprice}),o(tt(n))},onUpdateItemNo:i});case ge.Design:return Object(u.jsx)(Rn,{readOnly:n,e:h,item:t,onUpdateQuantity:function(e){e=e||1;var n=Object(w.a)(Object(w.a)({},t),{},{quantity:e});n=Object(w.a)(Object(w.a)({},n),{},{finalprice:kn(h,n,h.customer).finalprice}),o(tt(n))},onUpdateItemNo:i})}return Object(u.jsxs)("span",{children:["Unknown Product: ",t.modtype]})}),[o,h,xe]),Ce=Object(c.useCallback)((function(e){var t="Opening ".concat(e.itemno,": ").concat(e.name);if(e.modtype===ge.ImpactProduct){var n,i,a=e,c=j(null===(n=a.roomtype)||void 0===n?void 0:n.toString());c&&"Unknown"!==c||(c="Room"),t+=" - ".concat(c," ").concat(null!==(i=a.roomnum)&&void 0!==i?i:" number missing")}return Object(u.jsxs)("div",{className:"item-summary-header",children:[Object(u.jsx)("div",{className:"product-title",children:t}),Object(u.jsx)("div",{className:"product-price",children:At((e.sales_price||0)*(e.quantity||1))})]})}),[j]),Ae=(r=r||ve(h))&&!X((null===h||void 0===h?void 0:h._modified)||a.modified),Ee=null===h||void 0===h||null===(t=h.items)||void 0===t?void 0:t.filter((function(e){return!Z(e._modified)})),Se=Object(c.useMemo)((function(){var e=null;return Ln(ne)&&(e=Object(u.jsx)("div",{className:"flex_container_center show4",children:Object(u.jsx)(S.a,{style:{marginLeft:"1rem",display:"flex",alignSelf:"center"},size:"large"})})),Bn(ne)&&(e=Object(u.jsx)("div",{className:"flex_container_center show4",children:Object(u.jsx)(Vt.a,{style:{marginLeft:"1rem",display:"flex",alignSelf:"center"}})})),function(e){for(var t in e)if(![i.succeeded,i.unavailable,i.saving,""].includes(e[t]))return!1;return!0}(ne)&&(e=void 0===Ee||0===Ee.length?Object(u.jsx)("div",{className:"flex_container_center show4",children:Object(u.jsx)(I.a,{image:I.a.PRESENTED_IMAGE_SIMPLE,description:"Empty",style:{margin:"0px"}})}):Object(u.jsx)(P.a,{activeKey:G,onChange:function(e){return J(e)},children:Ee.sort((function(e,t){var n,i;return(null!==(n=e.itemno)&&void 0!==n?n:0)-(null!==(i=t.itemno)&&void 0!==i?i:0)})).map((function(e,t){return Object(u.jsx)(P.a.Panel,{className:"item-summary",header:Ce(e),extra:Object(u.jsx)(Gt,Object(w.a)({readOnly:r,item:e,itemIndex:t+1},xe)),children:Object(u.jsx)(Ne,{item:e,readOnly:r})},t)}))})),e}),[Ne,G,Ce,xe,r,Ee,ne]),Ie="Click here to edit reason for rejection",Pe=function(){switch(null===h||void 0===h?void 0:h.status){case Y.Approved:return null===h||void 0===h?void 0:h.approved_date;case Y.Rejected:return null===h||void 0===h?void 0:h.rejected_date;case Y.Delivered:return null===h||void 0===h?void 0:h.delivered_date;default:return}}(),ke=Object(u.jsx)(g.a,{children:Object.keys(Y).map((function(e,t){return Object(u.jsx)(On.a,{onClick:function(){return function(e){var t=fe(e);if(h&&h.status!==t){var n=Object(w.a)(Object(w.a)({},h),{},{status:t}),i=_e(new Date);switch(t){case Y.Approved:n.approved_date=i;break;case Y.Rejected:n.rejected_date=i;break;case Y.Delivered:n.delivered_date=i}o($e(n))}}(e)},children:e},t)}))}),De=qt(h,(null===h||void 0===h?void 0:h.add_sales_discount)||0,(null===h||void 0===h?void 0:h.add_inst_discount)||0,(null===h||void 0===h?void 0:h.permits)||0,(null===h||void 0===h?void 0:h.salestax)||0);h&&De.finalPrice!==h.totalprice&&setTimeout((function(){return o($e(Object(w.a)(Object(w.a)({},h),{},{totalprice:De.finalPrice})))}),0);var Re,Me=fa(),Te=Me.canPrint()?Object(u.jsx)(Nn,{estimate:h,isFailed:Bn(ne)}):Object(u.jsx)(yn,{estimate:h,customerNames:l,onChangeCustomer:function(e){try{var t,n,i=Number(e);je(i),o($e(void 0===h?ye((null===d||void 0===d||null===(t=d.user)||void 0===t?void 0:t.name)||"",(null===d||void 0===d||null===(n=d.user)||void 0===n?void 0:n.phone)||"",i):Object(w.a)(Object(w.a)({},h),{},{customerid:i})))}catch(a){console.error(a)}},onUpdateEstimate:function(e){return o($e(e))},isLoading:Ln(ne),isFailed:Bn(ne),defaults:d,readOnly:r}),Le=Me.canPrint()?Object(u.jsx)(An,{totals:De,includeInstallation:(null===h||void 0===h?void 0:h.is_installation_included)||!1}):Object(u.jsx)(Qt,{totals:De,onChangeAdditionalDiscountProductsPercentage:function(e){return h&&o($e(Object(w.a)(Object(w.a)({},h),{},{add_sales_discount:e})))},onChangeAdditionalDiscountInstallPercentage:function(e){return h&&o($e(Object(w.a)(Object(w.a)({},h),{},{add_inst_discount:e})))},onChangePermits:function(e){return h&&o($e(Object(w.a)(Object(w.a)({},h),{},{permits:e})))},onChangeSalesTax:function(e){return h&&o($e(Object(w.a)(Object(w.a)({},h),{},{salestax:e})))},includeInstallation:(null===h||void 0===h?void 0:h.is_installation_included)||!1,readOnly:r});return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(k.a,{children:[Object(u.jsxs)(D.a,{xs:24,children:[Object(u.jsx)(Mn,{level:3,style:{color:"#32445e",textAlign:"center",float:"left",width:"100%"},children:"Estimate"}),h&&h.id&&n(h.id)]}),Object(u.jsxs)(D.a,{xs:24,children:[Object(u.jsx)(Tn,{className:"hide-on-print",children:"State:"}),Object(u.jsx)(y.a,{overlay:ke,disabled:Ae,className:"hide-on-print",children:Object(u.jsxs)(R.a,{style:{margin:"1em 0em 2.3em 2em"},color:(Re=fe(null===h||void 0===h?void 0:h.status),Re&&he[Re]?he[Re]:"#f50"),children:[null===h||void 0===h?void 0:h.status," ",Object(u.jsx)($t.a,{})]})}),Pe&&Object(u.jsxs)(Tn,{style:{margin:"1em .5em 2em 1em"},className:"hide-on-print",children:["Date: ",Pe]}),Oe(null===h||void 0===h?void 0:h.status)?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Tn,{style:{margin:"1em .5em 2em 1em"},className:"hide-on-print",children:"Reason:"}),Object(u.jsx)(Tn,{style:{margin:"1em 2em 2em 0em",width:"20em"},className:"hide-on-print",editable:!Ae&&{triggerType:["text"],onChange:function(e){var t=e;t===Ie&&(t=void 0),h&&o($e(Object(w.a)(Object(w.a)({},h),{},{status_reason:t})))}},children:(null===h||void 0===h?void 0:h.status_reason)||(Ae?"No reason specified":Ie)})]}):""]})]}),Te,Object(u.jsx)(k.a,{id:"add-save-buttons",children:Object(u.jsx)(D.a,{xs:24,sm:24,md:24,lg:24,xl:24,children:Object(u.jsxs)("div",{className:"flex_container_end show4",children:[Object(u.jsx)(M.a,{type:"primary",shape:"round",icon:Object(u.jsx)(en.a,{}),size:"large",onClick:function(){return be(null)},disabled:pe(null===h||void 0===h?void 0:h.status)||!(null===h||void 0===h?void 0:h.customerid)||!h.id,children:"Add Product"}),Object(u.jsx)(M.a,{type:"primary",shape:"round",icon:ne.estimate===i.saving?Object(u.jsx)(tn.a,{spin:!0}):Object(u.jsx)(nn.a,{}),size:"large",style:{marginLeft:"2rem"},onClick:function(){return function(e,t,n){t&&(t.id?e(Xe(t)).then((function(e){return Fn(e,"Save Estimate",n)})):e(Xe(t)).then((function(e){return Fn(e,"Create Estimate",n)})))}(o,h,_)},disabled:!(h&&h.customerid&&(X(h._modified)||void 0!==h.items&&h.items.some((function(e){return X(e._modified)})))),children:"Save"}),Object(u.jsx)(M.a,{type:"primary",shape:"round",icon:Object(u.jsx)(an.a,{}),size:"large",style:{marginLeft:"2rem"},onClick:function(){return function(e,t,n){var i,a;t&&t.id&&(e(et(Object(w.a)(Object(w.a)({},t),{},{vendor:null===d||void 0===d||null===(i=d.user)||void 0===i?void 0:i.name,vendor_phone:null===d||void 0===d||null===(a=d.user)||void 0===a?void 0:a.phone}))),n.replace("/"),A.a.success({message:"Estimate cloned",description:"Success!",duration:10}))}(o,h,_)},disabled:h&&we(h),children:"Clone"}),(null===h||void 0===h?void 0:h.permitId)?"":Object(u.jsx)(M.a,{type:"primary",shape:"round",icon:Object(u.jsx)(cn.a,{}),size:"large",style:{marginLeft:"2rem"},onClick:function(){return window.open("../../amhppermits/buildingpermit_card.php?eid="+(null===h||void 0===h?void 0:h.id)+"&action=createFromEID&mainmenu=amhppermits","_self")},disabled:!h||!h.id,children:"Create Permit"}),(null===h||void 0===h?void 0:h.permitId)?Object(u.jsx)(M.a,{type:"primary",shape:"round",icon:Object(u.jsx)(cn.a,{}),size:"large",style:{marginLeft:"2rem"},onClick:function(){return window.open("../../amhppermits/buildingpermit_card.php?id="+(null===h||void 0===h?void 0:h.permitId)+"&mainmenu=amhppermits","_self")},disabled:!h||!h.id,children:"Show Permit"}):""]})})}),Object(u.jsx)(k.a,{children:Object(u.jsxs)(D.a,{xs:24,sm:24,md:24,lg:24,xl:24,children:[Object(u.jsx)(T.a,{}),Object(u.jsxs)("div",{className:"expand-collapse-buttons",children:[Object(u.jsx)(M.a,{type:"link",onClick:function(){return J(Ee?null===Ee||void 0===Ee?void 0:Ee.map((function(e,t){return t.toString()})):[])},children:"Expand all"})," | ",Object(u.jsx)(M.a,{type:"link",onClick:function(){return J([])},children:"Collapse all"})]}),Se,Object(u.jsx)(T.a,{}),U&&U.length&&U.length>0?U.map((function(e,t){return Object(u.jsx)(L.a,{message:e.type.toUpperCase(),description:e.msg,type:e.type,action:e.link&&Object(u.jsx)(B.b,{children:Object(u.jsx)(M.a,{size:"small",type:"ghost",children:"Open Item"})}),showIcon:!0,className:"hide-on-print",style:{marginBottom:"2rem"}},t)})):"",(null===h||void 0===h?void 0:h.notes)?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Mn,{className:"hide-on-print",level:5,children:"Internal Notes:"}),Object(u.jsx)(dn.a,{placeholder:"Notes",className:"hide-on-print",style:{marginBottom:"2rem"},autoSize:!0,maxLength:1024,onChange:function(e){return t=e.target.value,void(void 0!==h&&o($e(Object(w.a)(Object(w.a)({},h),{},{notes:t}))));var t},value:null===h||void 0===h?void 0:h.notes,readOnly:r})]}):"",(null===h||void 0===h?void 0:h.public_notes)?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Mn,{level:5,children:"Additional Notes:"}),Object(u.jsx)(dn.a,{placeholder:"Notes",style:{marginBottom:"2rem"},autoSize:!0,maxLength:1024,onChange:function(e){return t=e.target.value,void(void 0!==h&&o($e(Object(w.a)(Object(w.a)({},h),{},{public_notes:t}))));var t},value:null===h||void 0===h?void 0:h.public_notes,readOnly:r})]}):""]})}),Le,Object(u.jsx)(T.a,{}),Object(u.jsx)(k.a,{children:Object(u.jsx)(D.a,{xs:24,sm:24,md:24,lg:24,xl:24,children:Object(u.jsx)(pn,{readOnly:r})})}),Object(u.jsx)(ft,{visible:f,handleCancel:function(){return x(!1)},handleImpactProduct:function(){x(!1),h&&h.id?_.push("/impact/".concat(h.id)):_.push("/impact")},handleHardware:function(){x(!1),h&&h.id?_.push("/hardware/".concat(h.id)):_.push("/hardware")},handleMaterial:function(){x(!1),h&&h.id?_.push("/material/".concat(h.id)):_.push("/material")},handleDesign:function(){x(!1),h&&h.id?_.push("/design/".concat(h.id)):_.push("/design")}}),Object(u.jsx)(B.b,{direction:"vertical",align:"center",style:{width:"100%",marginTop:"1rem"},className:"show-on-print",children:Object(u.jsx)(L.a,{description:Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(Mn,{level:5,style:{color:"red"},children:["There will be a 3% charge for using a credit card",Object(u.jsx)("br",{}),"This price is valid for 30 days"]})}),type:"info",style:{textAlign:"center",backgroundColor:"white",border:"0"}})})]})},Un=function(e){var t=e.viewMenu;return Object(u.jsx)(d.a,{className:"home",children:Object(u.jsx)(_.Content,{className:"estimateContainer",children:Object(u.jsx)(Hn,{readOnly:!1,viewMenu:t})})})},zn=n.p+"static/media/logo.cbd6aea3.png",Wn=C.a.Paragraph,Kn=C.a.Text,Gn=C.a.Title,Yn=function(){var e=H(mt),t=H(ct),n=null===t||void 0===t?void 0:t.vendor_phone,i=null===e||void 0===e?void 0:e.company.phone;return n||(n=null===e||void 0===e?void 0:e.company.phone,i=null===e||void 0===e?void 0:e.company.fax),Object(u.jsxs)(k.a,{gutter:16,align:"middle",children:[Object(u.jsx)(D.a,{className:"gutter-row",span:5,children:Object(u.jsx)(Kt.a,{src:zn})}),Object(u.jsx)(D.a,{className:"gutter-row",span:14,children:Object(u.jsxs)(B.b,{size:[0,0],direction:"vertical",align:"center",style:{width:"100%"},children:[Object(u.jsx)(Gn,{level:4,style:{whiteSpace:"nowrap",marginBottom:"0em"},children:null===e||void 0===e?void 0:e.company.name}),Object(u.jsxs)(Kn,{style:{whiteSpace:"nowrap",fontSize:".8em"},children:[null===e||void 0===e?void 0:e.company.address,", ",null===e||void 0===e?void 0:e.company.town,", ",null===e||void 0===e?void 0:e.company.state,", ",null===e||void 0===e?void 0:e.company.zip]}),Object(u.jsxs)(Wn,{style:{whiteSpace:"nowrap"},children:[Object(u.jsx)(Kn,{strong:!0,style:{fontSize:"1em"},children:"Salesperson:"}),Object(u.jsx)(Kn,{strong:!0,style:{marginLeft:"1em",fontSize:"1em"},children:kt(n)}),Object(u.jsx)(Kn,{strong:!0,style:{marginLeft:"3em",fontSize:"1em"},children:"Head Office:"}),Object(u.jsx)(Kn,{strong:!0,style:{marginLeft:"1em",fontSize:"1em"},children:kt(i)})]})]})}),Object(u.jsx)(D.a,{className:"gutter-row",span:5})]})},Jn=function(e){var t=e.viewMenu;return Object(u.jsx)(d.a,{className:"print-estimate",children:Object(u.jsxs)(_.Content,{className:"estimateContainer",children:[Object(u.jsx)(Yn,{}),Object(u.jsx)(Hn,{readOnly:!0,viewMenu:t})]})})},Xn=n(458),Zn=n(64),qn=n(477);!function(e){e[e.Unknown=0]="Unknown",e[e.Bedroom=1]="Bedroom",e[e.Bathroom=2]="Bathroom",e[e.Other=3]="Other"}(un||(un={}));var Vn=function(e){var t=e.isModalVisible,n=e.handleCancel,i=e.handleTypeOptions;return Object(u.jsx)(Ot.a,{okButtonProps:{style:{display:"none"}},title:"In what type of room is this opening located?",visible:t,onCancel:n,children:Object(u.jsxs)("div",{className:"buttons_grid",children:[Object(u.jsx)(M.a,{className:"button_product",onClick:function(){return i&&i(un.Bedroom)},children:"Bedroom"}),Object(u.jsx)(M.a,{className:"button_product",onClick:function(){return i&&i(un.Bathroom)},children:"Bathroom"}),Object(u.jsx)(M.a,{className:"button_product",onClick:function(){return i&&i(un.Other)},children:"Other"}),Object(u.jsx)(M.a,{className:"button_product",onClick:function(){return i&&i(un.Unknown)},children:"I don't know"})]})})},$n=Object(w.a)(Object(w.a)({},En),{},{colonial_across:0,colonial_down:0,colonial_fee:0,is_colonial:!1,is_def_color:!0,is_def_glass_color:!0,is_screen:!1,is_standard:!0,itemtype:Se.Window,modtype:ge.ImpactProduct,room_description:"",roomnum:1,floornum:1,wintype:ke.SingleHungSeries}),ei=n(101),ti=n.n(ei),ni=[{color:"BRONZE",heighttxt:"25 3/4",lengthtxt:"2 1/4",id:522,itemtype:1,modtype:ge.ImpactProduct,glass_color:"BRONZE",interlayer:"CLEAR",wintype:ke.SingleHungSeries,name:"MyImpactProduct1",provider:"ECO WINDOWS",ref:"MyImpactProduct1",widthtxt:"105 3/4"},{color:"WHITE",heighttxt:"50 3/8",lengthtxt:"2 1/4",id:32,itemtype:1,modtype:ge.ImpactProduct,glass_color:"BRONZE",interlayer:"CLEAR",wintype:ke.SingleHungSeries,name:"MyImpactProduct2",provider:"ECO WINDOWS",ref:"MyImpactProduct2",widthtxt:"26 1/4"},{color:"WHITE",heighttxt:"62 3/4",lengthtxt:"2 1/4",id:256,itemtype:1,modtype:ge.ImpactProduct,glass_color:"BRONZE",interlayer:"CLEAR",wintype:ke.FrenchDoor,name:"MyImpactProduct3",provider:"PGT WINDOWS",ref:"MyImpactProduct3",widthtxt:"19 1/8"},{color:"GRAY",heighttxt:"",lengthtxt:"2 1/4",id:1768,itemtype:3,modtype:ge.Hardware,glass_color:"WHITE",interlayer:"WHITE",wintype:ke.SingleHungSeries,name:"MyImpactProduct4",provider:"MILLWORK",ref:"MyImpactProduct4",widthtxt:""},{color:"WHITE",heighttxt:"4 1/2",lengthtxt:"2 1/4",id:2083,itemtype:3,modtype:ge.Material,glass_color:"",interlayer:"",wintype:ke.SingleHungSeries,name:"MyMaterial1",provider:"",ref:"MyMaterial1",widthtxt:"3"},{color:"WHITE",heighttxt:"4 1/2",lengthtxt:"",id:2093,itemtype:3,modtype:ge.Design,glass_color:"",interlayer:"",wintype:ke.SingleHungSeries,name:"MyDesign1",provider:"",ref:"MyDesign1",widthtxt:"3"}],ii=function(e){var t,n=ni.find((function(t){return t.id===e}));n=null!==(t=n)&&void 0!==t?t:{color:"BRONZE",heighttxt:"25 3/4",lengthtxt:"2 1/4",id:e,name:"ECO 36 3/4 X 25 3/4 BRONZE/BRONZE CLEAR INTERLAYER",itemtype:1,modtype:ge.ImpactProduct,glass_color:"BRONZE",interlayer:"WHITE",wintype:ke.SingleHungSeries,provider:"ECO WINDOWS",ref:"36.75X25.75HRXOECOBB5.16C",widthtxt:"36 3/4"};var i=new ti.a(n.widthtxt?n.widthtxt:0),a=new ti.a(n.heighttxt?n.heighttxt:0),c=new ti.a(n.lengthtxt?n.lengthtxt:0),r=n.widthtxt?i.valueOf():0,o=n.heighttxt?a.valueOf():0,l=n.lengthtxt?c.valueOf():0,s=Object(w.a)(Object(w.a)({},n),{},{coating:"",configuration:"",cost_price:80,frame_color:"",glass_type:"",hardwaretype:"",height:o,image:"/AMCRMERP/htdocs/document.php?modulepart=product&attachment=0&file="+(256===n.id?"36.75X25.75HRXOECOBB5.16C/36.75X25.75.png":"19.125X25.75SHELECOBB5.16W/26.png"),inst_price:0,is_screen:!1,itemtype:Ee(""),length:l,sales_price:100,width:r});switch(s.modtype){case ge.Material:case ge.Design:s=Object(w.a)(Object(w.a)({},s),{},{itemtype:Ee("Hardware")});break;default:s=Object(w.a)(Object(w.a)({},s),{},{coating:"NONE",configuration:"X",frame_color:"BRONZE",glass_type:"Insulated",inst_price:150,is_screen:!0,itemtype:Ee("Window")})}return s},ai={productSummaries:[],productSummariesById:{},productSummariesByRef:{},productSummariesStatus:i.unavailable,productDetails:{},productDetailsStatus:i.unavailable,error:null},ci=Object(K.b)("fetchProductSummaries",function(){var e=Object(W.a)(z.a.mark((function e(t,n){var i,a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Fetching product summaries"),e.next=4,fetch("http://".concat(window.location.hostname,"/AMCRMERP/htdocs/custom/amhpestimatesv2/db/getproductsummaries.php"));case 4:return i=e.sent,e.next=7,i.json();case 7:return a=e.sent,e.abrupt("return",a);case 9:return e.abrupt("return",ni);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ri=Object(K.b)("fetchProductDetailsById",function(){var e=Object(W.a)(z.a.mark((function e(t,n){var i,a,c,r,o,l,s,d,u,j,m,b,h;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=n.getState().products).productDetails[t]){e.next=3;break}return e.abrupt("return",i.productDetails[t]);case 3:return console.log("Fetching product ",t),e.next=7,fetch("http://".concat(window.location.hostname,"/AMCRMERP/htdocs/custom/amhpestimatesv2/db/getproductdetails.php?id=").concat(t));case 7:return o=e.sent,e.next=10,o.json();case 10:return l=e.sent,s=null,s=Array.isArray(l)&&l.length>0?l[0]:l,d=new ti.a(null!==(a=s.widthtxt)&&void 0!==a?a:0),u=new ti.a(null!==(c=s.heighttxt)&&void 0!==c?c:0),j=new ti.a(null!==(r=s.lengthtxt)&&void 0!==r?r:0),m=s.width?Number(s.width):s.widthtxt?d.valueOf():0,b=s.height?Number(s.height):s.heighttxt?u.valueOf():0,h=s.length?Number(s.length):s.lengthtxt?j.valueOf():0,s=Object(w.a)(Object(w.a)({},s),{},{id:Number(s.id),sales_price:Number(s.sales_price),inst_price:Number(s.inst_price),cost_price:Number(s.cost_price),width:m,height:b,length:h,is_screen:Boolean(s.is_screen)}),e.abrupt("return",s);case 21:return e.abrupt("return",ii(t));case 22:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),oi=Object(K.c)({name:"products",initialState:ai,reducers:{},extraReducers:function(e){e.addCase(ci.pending,(function(e,t){e.productSummariesStatus=i.loading})),e.addCase(ci.fulfilled,(function(e,t){e.productSummariesStatus=i.succeeded,e.productSummaries=t.payload,e.productSummaries.forEach((function(t){return e.productSummariesById[t.id]=t})),e.productSummaries.forEach((function(t){return e.productSummariesByRef[t.ref]=t}))})),e.addCase(ci.rejected,(function(e,t){e.productSummariesStatus=i.failed,e.error=t.error.message})),e.addCase(ri.pending,(function(e,t){e.productDetailsStatus=i.loading})),e.addCase(ri.fulfilled,(function(e,t){e.productDetailsStatus=i.succeeded,e.productDetails[t.payload.id]=t.payload})),e.addCase(ri.rejected,(function(e,t){e.productDetailsStatus=i.failed,e.error=t.error.message}))}}),li=function(e){return e.products.productSummaries},si=function(e){return e.products.productSummariesById},di=function(e){return e.products.productSummariesByRef},ui=function(e){return e.products.productSummariesStatus},ji=oi.reducer,mi=function(e){var t=e.isModalVisible,n=e.onYes,i=e.onNo,a=e.onCancel;return Object(u.jsx)(Ot.a,{okButtonProps:{style:{display:"none"}},title:"Do you want to include new hardware?",visible:t,onCancel:a,children:Object(u.jsxs)("div",{className:"buttons_grid",children:[Object(u.jsx)(M.a,{className:"button_product",onClick:function(){return n&&n()},children:"Yes"}),Object(u.jsx)(M.a,{className:"button_product",onClick:function(){return i&&i()},children:"No"}),Object(u.jsx)(M.a,{className:"button_product",onClick:function(){return a&&a()},children:"Cancel"})]})})},bi=n(144),hi=n(457),pi=hn.a.Option,vi=function(e){var t=Object(c.useState)(e.currentID),n=Object(N.a)(t,2),a=n[0],r=n[1],o=Object(c.useState)(e.color),l=Object(N.a)(o,2),s=l[0],d=l[1],j=Object(c.useState)(""),m=Object(N.a)(j,2),b=m[0],h=m[1],p=Object(c.useState)(""),v=Object(N.a)(p,2),O=v[0],f=v[1],x=Object(c.useState)(""),g=Object(N.a)(x,2),y=g[0],_=g[1],w=Object(c.useState)(""),C=Object(N.a)(w,2),A=C[0],E=C[1],S=Object(c.useState)(""),I=Object(N.a)(S,2),P=I[0],k=I[1],D=Object(c.useState)(e.glasscolor),R=Object(N.a)(D,2),T=R[0],L=R[1],B=Object(c.useState)(""),F=Object(N.a)(B,2),Q=F[0],U=F[1],z=H(bt),W=H(mt),K=H(li),G=H(si),Y=H(ui),J=Object(c.useCallback)((function(e){return void 0===e||"None"===e||"Any"===e||""===e||"0"===e||0===e}),[]),X=Object(c.useCallback)((function(e,t){return J(e)?t:e}),[J]),Z=function(e){return G&&e?G[e]:void 0},q=Z(e.currentID),V=Object(c.useCallback)((function(){d((null===q||void 0===q?void 0:q.color)||e.color||"Any"),h(X(null===q||void 0===q?void 0:q.provider,"ECO WINDOWS")),f(X((null===q||void 0===q?void 0:q.itemtype)&&Ae(null===q||void 0===q?void 0:q.itemtype).toString(),"Any")),_(X(null===q||void 0===q?void 0:q.interlayer,"CLEAR")),E(X(null===q||void 0===q?void 0:q.wintype,"Any")),k(X(null===q||void 0===q?void 0:q.modtype,"Any")),L((null===q||void 0===q?void 0:q.glass_color)||e.glasscolor||"GRAY"),U(X(null===q||void 0===q?void 0:q.ref,"None"))}),[X,e.color,e.glasscolor,null===q||void 0===q?void 0:q.color,null===q||void 0===q?void 0:q.provider,null===q||void 0===q?void 0:q.itemtype,null===q||void 0===q?void 0:q.interlayer,null===q||void 0===q?void 0:q.wintype,null===q||void 0===q?void 0:q.modtype,null===q||void 0===q?void 0:q.glass_color,null===q||void 0===q?void 0:q.ref]),$=Object(c.useCallback)((function(){d(X(e.color,"Any")),h("Any"),f("Any"),_("Any"),E("Any"),k("Any"),L(X(e.glasscolor,"Any")),U("None")}),[X,e.color,e.glasscolor]);Object(c.useEffect)((function(){V()}),[e.visible,e.color,e.glasscolor,V]);var ee=function(e,t){var n=t.value.toLowerCase(),i=e.toLowerCase();return""===i||null!==n&&((null===n||void 0===n?void 0:n.indexOf(i))>=0||n.indexOf(i)>=0)},te=function(e){return e?e.ref:"Any"},ne=function(e){var t=!0;return t=(t=(t=(t=(t=(t=(t=t&&(J(s)||e.color===s))&&(J(b)||e.provider===b))&&(J(O)||e.itemtype===Ee(O)))&&(J(y)||e.interlayer===y))&&(J(A)||e.wintype===A))&&(J(P)||e.modtype===P))&&(J(T)||e.glass_color===T)},ie=function(e){r(e),U(function(e){var t;return null===(t=Z(e))||void 0===t?void 0:t.ref}(e)||"")},ae=function(){var e={},t=[];return null===K||void 0===K||K.forEach((function(n){n.interlayer&&(e[n.interlayer]||(e[n.interlayer]=!0,t.push(n.interlayer)))})),t}(),ce=null===K||void 0===K?void 0:K.filter(ne).map((function(e){return Object(u.jsx)(pi,{value:te(e),children:te(e)},e.id)}));return Object(u.jsx)(Ot.a,{title:"Search Products",visible:e.visible,onCancel:e.handleCancel,onOk:function(){return a&&e.handleProduct(a)},okButtonProps:{disabled:!a},footer:[Object(u.jsx)(M.a,{onClick:function(){return a&&e.handleProduct(a)},disabled:J(Q),children:"OK"},"OK"),Object(u.jsx)(M.a,{onClick:e.handleCancel,children:"Cancel"},"Cancel"),Object(u.jsx)(M.a,{onClick:$,style:{marginLeft:"1rem"},children:"Clear"},"Clear")],children:Object(u.jsxs)(hi.a,{name:"product-search",labelCol:{span:8},wrapperCol:{span:16},autoComplete:"off",children:[Object(u.jsx)(hi.a.Item,{label:"Provider",children:Object(u.jsxs)(hn.a,{showSearch:!0,className:"input show1",optionFilterProp:"label",onChange:function(e,t){return h(t.value)},filterOption:ee,value:b,loading:z===i.loading,placeholder:"Select Provider...",children:[Object(u.jsx)(pi,{value:"Any",children:"Any"},"0"),null===W||void 0===W?void 0:W.providers.map((function(e){return Object(u.jsx)(pi,{value:e.label,children:e.label},e.value)}))]})}),Object(u.jsx)(hi.a.Item,{label:"Color",children:Object(u.jsxs)(hn.a,{showSearch:!0,className:"input show1",optionFilterProp:"value",onChange:function(e,t){return t&&d(t.key)},filterOption:function(e,t){return!(null===t||void 0===t?void 0:t.value)||t.value.toString().toLowerCase().indexOf(e.toLowerCase())>=0},value:s,children:[Object(u.jsx)(pi,{value:"Any",children:"Any"},"Any"),null===W||void 0===W?void 0:W.colors.filter((function(e){return"NONE"!==e.label})).map((function(e){return Object(u.jsx)(pi,{value:e.label,children:e.label},e.label)}))]})}),Object(u.jsx)(hi.a.Item,{label:"Glass Color",children:Object(u.jsxs)(hn.a,{showSearch:!0,className:"input show1",optionFilterProp:"value",onChange:function(e,t){return t&&L(t.key)},filterOption:function(e,t){return!(null===t||void 0===t?void 0:t.value)||t.value.toString().toLowerCase().indexOf(e.toLowerCase())>=0},value:T,children:[Object(u.jsx)(pi,{value:"Any",children:"Any"},"Any"),null===W||void 0===W?void 0:W.colors.filter((function(e){return"NONE"!==e.label})).map((function(e){return Object(u.jsx)(pi,{value:e.label,children:e.label},e.label)}))]})}),Object(u.jsx)(hi.a.Item,{label:"Type of Opening",children:Object(u.jsx)(hn.a,{className:"input show1",onChange:function(e,t){return t&&f(t.key)},value:O,children:Ce.map((function(e){return"None"===e?"Any":e})).map((function(e){return Object(u.jsx)(pi,{value:e,children:e},e)}))})}),Object(u.jsx)(hi.a.Item,{label:"Interlayer",children:Object(u.jsxs)(hn.a,{className:"input show1",onChange:function(e,t){return t&&_(t.key)},value:y,children:[Object(u.jsx)(pi,{value:"Any",children:"Any"},"Any"),ae.map((function(e){return Object(u.jsx)(pi,{value:e,children:e},e)}))]})}),Object(u.jsx)(hi.a.Item,{label:"Type",children:Object(u.jsxs)(hn.a,{className:"input show1",onChange:function(e,t){return t&&E(t.key)},value:A,children:[Object(u.jsx)(pi,{value:"Any",children:"Any"},"Any"),Pe.map((function(e){return"None"===e?"Any":e})).map((function(e){return Object(u.jsx)(pi,{value:e,children:e},e)}))]})}),Object(u.jsx)(hi.a.Item,{label:"References ("+(null===ce||void 0===ce?void 0:ce.length)+")",children:Object(u.jsxs)(hn.a,{showSearch:!0,className:"input show1",optionFilterProp:"ref",onChange:function(e,t){return ie(t?Number(t.key):0)},filterOption:function(e,t){var n=J(t.key)?void 0:Z(t.key),i=void 0!==n&&ne(n);return i=i&&ee(e,t)},value:Q,loading:Y===i.loading,placeholder:"Select Product Reference...",children:[Object(u.jsx)(pi,{value:"None",children:"None"},"0"),ce]})})]})})},Oi=Object(K.a)({reducer:{customers:ue,estimates:lt,defaults:vt,products:ji}}),fi=d.a.Content,xi=C.a.Title,gi=C.a.Text,yi=hn.a.Option,_i=function(e){var t,n,r,o=e.estimate,l=e.item,s=e.onClose,j=e.readOnly,m=Object(c.useState)(!1),b=Object(N.a)(m,2),h=b[0],p=b[1],v=Object(c.useState)(!1),O=Object(N.a)(v,2),x=O[0],_=O[1],C=H(li),E=H(di),S=H(mt),I=H(bt),P=Q(),R=Object(c.useState)((function(){return function(e){return e?Object(w.a)({},e):Object(w.a)({},$n)}(l)})),L=Object(N.a)(R,2),F=L[0],U=L[1],K=H(ht),G=Object(c.useState)(!1),Y=Object(N.a)(G,2),Z=Y[0],q=Y[1],V=Object(c.useState)(!1),$=Object(N.a)(V,2),ee=$[0],te=$[1];Object(c.useEffect)((function(){0===(null===S||void 0===S?void 0:S.colors.length)&&P(ut())}),[P,S]),Object(c.useEffect)((function(){void 0===F.roomtype&&U(Object(w.a)(Object(w.a)({},F),{},{roomtype:0}))}),[F]),Object(c.useEffect)((function(){void 0!==C&&0!==C.length||P(ci())}),[P,C]),jn(o,l);var ie=function(e,t){e&&ae(e),s&&s(t)},ae=function(){var e=Object(W.a)(z.a.mark((function e(t){var n;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!J(t._modified)||0!==t.id){e.next=5;break}return e.next=3,P(at(t));case 3:e.next=7;break;case 5:return e.next=7,P(tt(t));case 7:(n=Oi.getState().estimates.estimate)&&n.id&&P(Xe(n)).then((function(e){return A.a.success({message:"Save Estimate",description:"Success!",duration:10})}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(F&&o){var ce=function(e,t,n){if(t){var i=Math.round(100*((t.cost_price||0)+(t.cost_price||0)*ne(null===n||void 0===n?void 0:n.reltype)))/100;return{sales_price:i,finalprice:i-(t.cost_price||0)*(t.sales_discount||0)+(e.is_installation_included?(t.inst_price||0)-(t.inst_price||0)*(t.inst_discount||0):0)+(t.is_colonial&&t.colonial_fee||0)}}return{sales_price:0,finalprice:0}}(o,F,null===o||void 0===o?void 0:o.customer);F.sales_price===ce.sales_price&&F.finalprice===ce.finalprice||U(Object(w.a)(Object(w.a)({},F),{},{sales_price:ce.sales_price,finalprice:ce.finalprice}))}var re=function(e){U(Object(w.a)(Object(w.a)({},e),{},{_modified:J(e._modified)?a.new:a.modified}))},oe=[];null===o||void 0===o||null===(t=o.items)||void 0===t||t.forEach((function(e){if(e.modtype===ge.ImpactProduct){var t=e;t.room_description&&!oe.includes(t.room_description)&&oe.push(t.room_description)}})),F.room_description&&!oe.includes(F.room_description)&&oe.push(F.room_description),oe.sort((function(e,t){return e.localeCompare(t)}));var le,se,de=Object(u.jsxs)(g.a,{children:[oe.map((function(e,t){return Object(u.jsx)(On.a,{onClick:function(){return re(Object(w.a)(Object(w.a)({},F),{},{room_description:e}))},children:e},t)})),Object(u.jsx)(On.a,{onClick:function(){return q(!0)},children:"Click here to write new description"},oe.length)]});return Object(u.jsxs)(d.a,{className:"layout",children:[Object(u.jsxs)(fi,{children:[Object(u.jsx)(xi,{level:2,style:{color:"#32445e"},children:"Impact Product"}),Object(u.jsxs)(k.a,{gutter:[24,24],children:[Object(u.jsxs)(D.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:[Object(u.jsx)(xi,{level:5,children:"Reference Product"}),Object(u.jsx)(M.a,{onClick:function(){return te(!0)},disabled:j,children:F.product_ref||"Choose..."}),Object(u.jsxs)("div",{className:"flex_container block_space show3",children:[Object(u.jsx)(bn.a,{checked:F.is_standard,onChange:function(){},disabled:!0,children:Object(u.jsx)(xi,{level:5,children:"Standard"})}),Object(u.jsx)(bn.a,{checked:F.is_def_color,onChange:function(e){return re(Object(w.a)(Object(w.a)({},F),{},{is_def_color:e.target.checked}))},disabled:j,children:Object(u.jsx)(xi,{level:5,children:"Def. Frame Color"})}),Object(u.jsx)(bn.a,{checked:F.is_def_glass_color,onChange:function(e){return re(Object(w.a)(Object(w.a)({},F),{},{is_def_glass_color:e.target.checked}))},disabled:j,children:Object(u.jsx)(xi,{level:5,children:"Def. Glass Color"})})]}),Object(u.jsxs)("div",{className:"flex_container block_space show2",children:[Object(u.jsx)(xi,{level:5,style:{marginRight:15},children:"Type of Room:"}),Object(u.jsx)(hn.a,{showSearch:!0,style:{flexGrow:1},optionFilterProp:"label",onChange:function(e,t){return re(Object(w.a)(Object(w.a)({},F),{},{roomtype:t.key}))},filterOption:function(e,t){var n=t.value.toLowerCase(),i=e.toLowerCase();return""===i||null!==n&&((null===n||void 0===n?void 0:n.indexOf(i))>=0||n.indexOf(i)>=0)},loading:I===i.loading,value:K(null===F||void 0===F||null===(n=F.roomtype)||void 0===n?void 0:n.toString()),disabled:j,children:null===S||void 0===S?void 0:S.roomtypes.map((function(e){return Object(u.jsx)(yi,{value:e.label,children:e.label},e.value)}))})]}),Object(u.jsxs)("div",{className:"flex_container block_space show2",children:[Object(u.jsx)(xi,{level:5,className:"input_text",children:"Room #"}),Object(u.jsx)(Xn.a,{min:1,onChange:function(e){return re(Object(w.a)(Object(w.a)({},F),{},{roomnum:e}))},value:F.roomnum||0,disabled:j}),Object(u.jsx)(xi,{level:5,className:"input_text",children:"Floor #"}),Object(u.jsx)(Xn.a,{min:1,onChange:function(e){return re(Object(w.a)(Object(w.a)({},F),{},{floornum:e}))},value:F.floornum||0,disabled:j})]}),Object(u.jsxs)("div",{className:"flex_container block_space show2",children:[Object(u.jsx)(xi,{level:5,children:"Description:"}),Z?Object(u.jsx)(bi.default,{autoFocus:!0,onFocus:function(e){return e.target.select()},maxLength:100,style:{marginLeft:"2rem",width:"100%"},defaultValue:null===F||void 0===F?void 0:F.room_description,onBlur:function(e){re(Object(w.a)(Object(w.a)({},F),{},{room_description:e.target.value})),q(!1)}}):Object(u.jsx)(y.a,{overlay:de,disabled:j,children:Object(u.jsx)(M.a,{type:"link",onClick:function(){return q(!0)},style:{marginBottom:".5em",width:"100%",whiteSpace:"normal"},children:Object(u.jsxs)(B.b,{children:[(null===F||void 0===F?void 0:F.room_description)||"Click to write a new description",Object(u.jsx)($t.a,{})]})})})]}),Object(u.jsx)(T.a,{}),Object(u.jsx)(xi,{level:5,children:"Provider"}),Object(u.jsx)(xn.a,{className:"input show4",placeholder:"Provider",disabled:!0,value:(se=F.provider,void 0===se||"Undefined"===se||""===se?"None":F.provider)}),Object(u.jsx)(xi,{level:5,children:"Type of Opening"}),Object(u.jsx)(xn.a,{className:"input show4",placeholder:"Type of Opening",disabled:!0,value:F.itemtype||""}),Object(u.jsx)(xi,{level:5,children:"Type"}),Object(u.jsx)(xn.a,{className:"input show4",placeholder:"Type",disabled:!0,value:F.wintype}),Object(u.jsx)(xi,{level:5,children:"Configuration"}),Object(u.jsx)(xn.a,{className:"input show3",placeholder:"Configuration",disabled:!0,value:F.configuration}),Object(u.jsx)(xi,{level:5,children:"Frame Color"}),Object(u.jsx)(xn.a,{className:"input show1",placeholder:"Frame",disabled:!0,value:F.frame_color}),Object(u.jsx)("div",{className:"flex_container_center block_space",children:Object(u.jsx)(Kt.a.PreviewGroup,{children:Object(u.jsx)(Kt.a,{hidden:void 0===F.image||""===F.image,className:"img",src:""+F.image,alt:F.name})})})]}),Object(u.jsxs)(D.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:[Object(u.jsxs)("div",{className:"block_space show2",children:[Object(u.jsx)(bn.a,{checked:F.is_colonial,onChange:function(e){return re(Object(w.a)(Object(w.a)({},F),{},{is_colonial:e.target.checked}))},className:"input_colonial",disabled:j,children:Object(u.jsx)(xi,{level:5,children:"Colonial"})}),Object(u.jsxs)("div",{className:"flex_container ".concat(F.is_colonial?"show1":"hide"),children:[Object(u.jsx)(gi,{children:"A:"}),Object(u.jsx)(Xn.a,{className:"input",placeholder:"Across",style:{marginLeft:5,marginRight:15,width:"25%"},onBlur:function(e){return re(Object(w.a)(Object(w.a)({},F),{},{colonial_across:Number(e.target.value)}))},onStep:function(e){return re(Object(w.a)(Object(w.a)({},F),{},{colonial_across:e}))},value:F.colonial_across,disabled:j}),Object(u.jsx)(gi,{children:"D:"}),Object(u.jsx)(Xn.a,{className:"input",placeholder:"Down",style:{marginLeft:5,width:"25%"},onBlur:function(e){return re(Object(w.a)(Object(w.a)({},F),{},{colonial_down:Number(e.target.value)}))},onStep:function(e){return re(Object(w.a)(Object(w.a)({},F),{},{colonial_down:e}))},value:F.colonial_down,disabled:j})]})]}),Object(u.jsx)("div",{className:"flex_container block_space",children:Object(u.jsx)(bn.a,{checked:F.is_screen,onChange:function(e){return re(Object(w.a)(Object(w.a)({},F),{},{is_screen:e.target.checked}))},disabled:j||[ke.FrenchDoor,ke.FixedGlass].includes(F.wintype),children:Object(u.jsx)(xi,{level:5,children:"Screen"})})}),Object(u.jsx)(xi,{level:5,children:"Sizes"}),Object(u.jsxs)("div",{className:"flex_container block_space show4",children:[Object(u.jsx)(gi,{children:"W:"}),Object(u.jsx)(xn.a,{hidden:!0,value:F.width}),Object(u.jsx)(xn.a,{style:{marginLeft:5,marginRight:15},value:F.widthtxt,disabled:!0}),Object(u.jsx)(gi,{children:"H:"}),Object(u.jsx)(xn.a,{hidden:!0,value:F.height}),Object(u.jsx)(xn.a,{style:{marginLeft:5,marginRight:15},value:F.heighttxt,disabled:!0}),Object(u.jsx)(gi,{children:"L:"}),Object(u.jsx)(xn.a,{hidden:!0,value:F.length}),Object(u.jsx)(xn.a,{style:{marginLeft:5},value:F.lengthtxt,disabled:!0})]}),Object(u.jsx)(xi,{level:5,children:"Glass Type"}),Object(u.jsx)(xn.a,{className:"input show1",placeholder:"Glass",disabled:!0,value:F.glass_type}),Object(u.jsx)(xi,{level:5,children:"Glass Color"}),Object(u.jsx)(xn.a,{className:"input show3",placeholder:"Glass Color",disabled:!0,value:F.glass_color}),Object(u.jsx)(xi,{level:5,children:"Interlayer"}),Object(u.jsx)(xn.a,{className:"input show2",placeholder:"Interlayer",disabled:!0,value:F.interlayer}),Object(u.jsx)(xi,{level:5,children:"Coating"}),Object(u.jsx)(xn.a,{className:"input show4",placeholder:"Coating",disabled:!0,value:F.coating}),Object(u.jsx)(T.a,{}),(null===o||void 0===o?void 0:o.is_installation_included)?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(xi,{level:5,children:"Installation & Discount %"}),Object(u.jsxs)("div",{className:"flex_container block_space show1",children:[Object(u.jsx)(Xn.a,{className:"input",placeholder:"Installation",style:{marginRight:20},disabled:!0,formatter:At,value:F.inst_price}),Object(u.jsx)(Xn.a,{className:"input",placeholder:"Discount",min:0,max:1,step:.01,onBlur:function(e){return re(Object(w.a)(Object(w.a)({},F),{},{inst_discount:It(e.target.value)}))},onStep:function(e){return re(Object(w.a)(Object(w.a)({},F),{},{inst_discount:e}))},formatter:St,parser:It,value:F.inst_discount,disabled:j})]})]}):"",F.is_colonial?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(xi,{level:5,children:["Colonial Fee ",Object(u.jsx)(Zn.a,{title:"Colonial is a different material that has an extra cost",children:Object(u.jsx)(qn.a,{twoToneColor:"#32445E"})})]}),Object(u.jsx)(Xn.a,{className:"input show1",placeholder:"Colonial Fee",onBlur:function(e){return re(Object(w.a)(Object(w.a)({},F),{},{colonial_fee:Et(e.target.value)}))},onStep:function(e){return re(Object(w.a)(Object(w.a)({},F),{},{colonial_fee:e}))},formatter:At,parser:Et,value:F.colonial_fee,disabled:j})]}):"",Object(u.jsx)(xi,{level:5,children:"Sales Price & Discount %"}),Object(u.jsxs)("div",{className:"flex_container block_space",children:[Object(u.jsx)(Xn.a,{className:"input show4",placeholder:"Price",style:{marginRight:20},disabled:!0,value:F.sales_price,formatter:At}),Object(u.jsx)(Xn.a,{className:"input",placeholder:"Discount",min:0,max:1,step:.01,onBlur:function(e){return re(Object(w.a)(Object(w.a)({},F),{},{sales_discount:It(e.target.value)}))},onStep:function(e){return re(Object(w.a)(Object(w.a)({},F),{},{sales_discount:e}))},formatter:St,parser:It,value:F.sales_discount,disabled:j})]}),Object(u.jsxs)(xi,{level:5,children:["Final Price: ",At(F.finalprice)]}),Object(u.jsxs)("div",{className:"flex_container_end show4",children:[Object(u.jsx)(M.a,{type:F&&X(F._modified)?"primary":"ghost",shape:"round",icon:Object(u.jsx)(nn.a,{}),size:"large",onClick:function(){0===F.roomtype?p(!0):F.wintype===ke.FrenchDoor?_(!0):ie(F,!1)},disabled:j||void 0===F.product_ref,children:l?"Save":"Add"}),Object(u.jsx)(M.a,{type:"primary",shape:"round",icon:Object(u.jsx)(f.a,{}),size:"large",onClick:function(){s&&s(!1)},style:{marginLeft:"20px"},children:"Cancel"})]})]})]})]}),Object(u.jsx)(Vn,{isModalVisible:h,handleCancel:function(){p(!1)},handleTypeOptions:function(e){p(!1),F.wintype===ke.FrenchDoor?(re(Object(w.a)(Object(w.a)({},F),{},{roomtype:e})),_(!0)):(ae(Object(w.a)(Object(w.a)({},F),{},{roomtype:e})),ie(null,!1))}}),Object(u.jsx)(mi,{isModalVisible:x,onYes:function(){return ie(F,!0)},onNo:function(){return ie(F,!1)},onCancel:function(){_(!1)}}),Object(u.jsx)(vi,{visible:ee,currentID:null===(le=F.product_ref,r=E&&le?E[le]:void 0)||void 0===r?void 0:r.id,color:F.is_def_color&&(null===o||void 0===o?void 0:o.defcolor)||"",glasscolor:F.is_def_glass_color&&(null===o||void 0===o?void 0:o.defglasscolor)||"",handleCancel:function(){return te(!1)},handleProduct:function(e){te(!1),P(ri(e)).then((function(e){var t=e.payload,n=Object(w.a)(Object(w.a)({},F),{},{_modified:X(F._modified)?F._modified:a.modified,coating:t.coating,configuration:t.configuration,color:t.color,cost_price:t.cost_price||0,frame_color:t.frame_color,glass_color:t.glass_color,glass_type:t.glass_type,height:t.height,heighttxt:t.heighttxt||void 0,image:t.image,inst_price:t.inst_price||0,interlayer:t.interlayer,is_screen:![ke.FrenchDoor,ke.FixedGlass].includes(t.wintype),itemtype:Ae(t.itemtype),length:t.length,lengthtxt:t.lengthtxt||void 0,modtype:t.modtype||ge.ImpactProduct,name:t.name,product_ref:t.ref,provider:t.provider,sales_price:t.sales_price||0,width:t.width,widthtxt:t.widthtxt||void 0,wintype:t.wintype});re(n)}))}})]})},wi=d.a.Content,Ni=function(){var e=Q(),t=Object(c.useState)(void 0),n=Object(N.a)(t,2),i=n[0],r=n[1],o=H(ct),l=Object(b.h)(),s=Object(b.f)();Object(c.useEffect)((function(){l.eid&&void 0===o?e(Ke(Number(l.eid))):r(Object(w.a)(Object(w.a)({},$n),{},{estimateid:o&&o.id?o.id:0,_modified:a.new}))}),[e,l.eid,o]),Object(c.useEffect)((function(){l.iid&&o&&o.items&&r(o.items.find((function(e){return e.id===Number(l.iid)})))}),[o,l.iid]);var j=ve(o);return Object(u.jsx)(d.a,{className:"impact",children:Object(u.jsx)(wi,{className:"impactContainer",children:i?Object(u.jsx)(_i,{estimate:o,item:i,onClose:function(e){e&&o&&o.id?s.replace("/hardware/".concat(o.id)):s.length>0&&s.goBack()},readOnly:j}):Object(u.jsx)(S.a,{size:"large",style:{display:"flex",alignSelf:"center"}})})})},Ci=hn.a.Option,Ai=function(e){var t=Object(c.useState)(e.currentID),n=Object(N.a)(t,2),a=n[0],r=n[1],o=Object(c.useState)(e.color),l=Object(N.a)(o,2),s=l[0],d=l[1],j=Object(c.useState)(""),m=Object(N.a)(j,2),b=m[0],h=m[1],p=Object(c.useState)(""),v=Object(N.a)(p,2),O=v[0],f=v[1],x=Object(c.useState)(""),g=Object(N.a)(x,2),y=g[0],_=g[1],w=Object(c.useState)(""),C=Object(N.a)(w,2),A=C[0],E=C[1],S=Object(c.useState)(""),I=Object(N.a)(S,2),P=I[0],k=I[1],D=H(bt),R=H(mt),T=H(li),L=H(si),B=H(ui),F=Object(c.useCallback)((function(e){return void 0===e||"None"===e||"Any"===e||""===e||"0"===e||0===e}),[]),Q=Object(c.useCallback)((function(e,t){return F(e)?t:e}),[F]),U=function(e){return L&&e?L[e]:void 0},z=U(e.currentID),W=Object(c.useCallback)((function(){d((null===z||void 0===z?void 0:z.color)||e.color||"Any"),h(Q(null===z||void 0===z?void 0:z.provider,"Any")),f(Q(null===z||void 0===z?void 0:z.widthtxt,"Any")),_(Q(null===z||void 0===z?void 0:z.heighttxt,"Any")),E(Q(null===z||void 0===z?void 0:z.lengthtxt,"Any")),k(Q(null===z||void 0===z?void 0:z.ref,"None"))}),[null===z||void 0===z?void 0:z.color,null===z||void 0===z?void 0:z.provider,null===z||void 0===z?void 0:z.widthtxt,null===z||void 0===z?void 0:z.heighttxt,null===z||void 0===z?void 0:z.lengthtxt,null===z||void 0===z?void 0:z.ref,e.color,Q]),K=Object(c.useCallback)((function(){d(Q(e.color,"Any")),h("Any"),f("Any"),_("Any"),E("Any"),k("None")}),[Q,e.color]);Object(c.useEffect)((function(){W()}),[e.visible,e.color,W]);var G=function(e,t){var n=t.value.toLowerCase(),i=e.toLowerCase();return""===i||null!==n&&((null===n||void 0===n?void 0:n.indexOf(i))>=0||n.indexOf(i)>=0)},Y=function(e){return e?e.ref:"Any"},J=Object(c.useMemo)((function(){return null===T||void 0===T?void 0:T.filter((function(e){return e.modtype===ge.Material}))}),[T]),X=Object(c.useCallback)((function(e){var t=!0;return t=(t=(t=(t=(t=t&&(F(s)||e.color===s))&&(F(b)||e.provider===b))&&(F(O)||e.widthtxt===O))&&(F(y)||e.heighttxt===y))&&(F(A)||e.lengthtxt===A)}),[s,y,A,b,F,O]),Z=function(e){r(e),k(function(e){var t;return null===(t=U(e))||void 0===t?void 0:t.ref}(e)||"")},q=Object(c.useMemo)((function(){return null===J||void 0===J?void 0:J.filter(X)}),[X,J]),V=Object(c.useMemo)((function(){return null===q||void 0===q?void 0:q.map((function(e){return Object(u.jsx)(Ci,{value:Y(e),children:Y(e)},e.id)}))}),[q]),$=Object(c.useMemo)((function(){var e={};return null===J||void 0===J||J.forEach((function(t){t.widthtxt&&(e[t.widthtxt]=t.widthtxt)})),Object.keys(e).map((function(e){return Object(u.jsx)(Ci,{value:e,children:e},e)}))}),[J]),ee=Object(c.useMemo)((function(){var e={};return null===J||void 0===J||J.forEach((function(t){t.heighttxt&&(e[t.heighttxt]=t.heighttxt)})),Object.keys(e).map((function(e){return Object(u.jsx)(Ci,{value:e,children:e},e)}))}),[J]),te=Object(c.useMemo)((function(){var e={};return null===J||void 0===J||J.forEach((function(t){t.lengthtxt&&(e[t.lengthtxt]=t.lengthtxt)})),Object.keys(e).map((function(e){return Object(u.jsx)(Ci,{value:e,children:e},e)}))}),[J]);return Object(u.jsx)(Ot.a,{title:"Search Products",visible:e.visible,onCancel:e.handleCancel,onOk:function(){return a&&e.handleProduct(a)},okButtonProps:{disabled:!a},footer:[Object(u.jsx)(M.a,{onClick:function(){return a&&e.handleProduct(a)},disabled:F(P),children:"OK"},"OK"),Object(u.jsx)(M.a,{onClick:e.handleCancel,children:"Cancel"},"Cancel"),Object(u.jsx)(M.a,{onClick:K,style:{marginLeft:"1rem"},children:"Clear"},"Clear")],children:Object(u.jsxs)(hi.a,{name:"product-search",labelCol:{span:8},wrapperCol:{span:16},autoComplete:"off",children:[Object(u.jsx)(hi.a.Item,{label:"Provider",children:Object(u.jsxs)(hn.a,{showSearch:!0,className:"input show1",optionFilterProp:"label",onChange:function(e,t){return h(t.value)},filterOption:G,value:b,loading:D===i.loading,placeholder:"Select Provider...",children:[Object(u.jsx)(Ci,{value:"Any",children:"Any"},"0"),null===R||void 0===R?void 0:R.providers.map((function(e){return Object(u.jsx)(Ci,{value:e.label,children:e.label},e.value)}))]})}),Object(u.jsx)(hi.a.Item,{label:"Color",children:Object(u.jsxs)(hn.a,{showSearch:!0,className:"input show1",optionFilterProp:"value",onChange:function(e,t){return t&&d(t.key)},filterOption:function(e,t){return!(null===t||void 0===t?void 0:t.value)||t.value.toString().toLowerCase().indexOf(e.toLowerCase())>=0},value:s,children:[Object(u.jsx)(Ci,{value:"Any",children:"Any"},"Any"),null===R||void 0===R?void 0:R.colors.filter((function(e){return"NONE"!==e.label})).map((function(e){return Object(u.jsx)(Ci,{value:e.label,children:e.label},e.label)}))]})}),Object(u.jsx)(hi.a.Item,{label:"Width",children:Object(u.jsxs)(hn.a,{showSearch:!0,className:"input show1",optionFilterProp:"value",onChange:function(e,t){return t&&f(t.key)},filterOption:function(e,t){return!(null===t||void 0===t?void 0:t.value)||t.value.toString().toLowerCase().indexOf(e.toLowerCase())>=0},value:O,children:[Object(u.jsx)(Ci,{value:"Any",children:"Any"},"Any"),$]})}),Object(u.jsx)(hi.a.Item,{label:"Height",children:Object(u.jsxs)(hn.a,{showSearch:!0,className:"input show1",optionFilterProp:"value",onChange:function(e,t){return t&&_(t.key)},filterOption:function(e,t){return!(null===t||void 0===t?void 0:t.value)||t.value.toString().toLowerCase().indexOf(e.toLowerCase())>=0},value:y,children:[Object(u.jsx)(Ci,{value:"Any",children:"Any"},"Any"),ee]})}),Object(u.jsx)(hi.a.Item,{label:"Length",children:Object(u.jsxs)(hn.a,{showSearch:!0,className:"input show1",optionFilterProp:"value",onChange:function(e,t){return t&&E(t.key)},filterOption:function(e,t){return!(null===t||void 0===t?void 0:t.value)||t.value.toString().toLowerCase().indexOf(e.toLowerCase())>=0},value:A,children:[Object(u.jsx)(Ci,{value:"Any",children:"Any"},"Any"),te]})}),Object(u.jsx)(hi.a.Item,{label:"References ("+(null===V||void 0===V?void 0:V.length)+")",children:Object(u.jsxs)(hn.a,{showSearch:!0,className:"input show1",optionFilterProp:"ref",onChange:function(e,t){return Z(t?Number(t.key):0)},filterOption:function(e,t){var n=F(t.key)?void 0:U(t.key),i=void 0!==n&&X(n);return i=i&&G(e,t)},value:P,loading:B===i.loading,placeholder:"Select Product Reference...",children:[Object(u.jsx)(Ci,{value:"None",children:"None"},"0"),V]})})]})})},Ei=d.a.Content,Si=C.a.Title,Ii=C.a.Text,Pi=function(e){var t,n=e.estimate,i=e.item,r=e.onClose,o=e.readOnly,l=H(li),s=H(di),j=H(mt),m=Q(),b=Object(c.useState)((function(){return function(e){return e?Object(w.a)({},e):Object(w.a)({},Sn)}(i)})),h=Object(N.a)(b,2),p=h[0],v=h[1],O=Object(c.useState)(!1),x=Object(N.a)(O,2),g=x[0],y=x[1];Object(c.useEffect)((function(){0===(null===j||void 0===j?void 0:j.colors.length)&&m(ut())}),[m,j]),Object(c.useEffect)((function(){void 0!==l&&0!==l.length||m(ci())}),[m,l]),jn(n,i);var _=function(e){e&&C(e),r&&r()},C=function(){var e=Object(W.a)(z.a.mark((function e(t){var n;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!J(t._modified)||0!==t.id){e.next=5;break}return e.next=3,m(at(t));case 3:e.next=7;break;case 5:return e.next=7,m(tt(t));case 7:(n=Oi.getState().estimates.estimate)&&n.id&&m(Xe(n)).then((function(e){return A.a.success({message:"Save Estimate",description:"Success!",duration:10})}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(p&&n){var E=In(n,p,null===n||void 0===n?void 0:n.customer);p.sales_price===E.sales_price&&p.finalprice===E.finalprice||v(Object(w.a)(Object(w.a)({},p),{},{sales_price:E.sales_price,finalprice:E.finalprice}))}var S,I,P=function(e){v(Object(w.a)(Object(w.a)({},e),{},{_modified:J(e._modified)?a.new:a.modified}))};return Object(u.jsxs)(d.a,{className:"layout",children:[Object(u.jsxs)(Ei,{children:[Object(u.jsx)(Si,{level:2,style:{color:"#32445e"},children:"Material"}),Object(u.jsxs)(k.a,{gutter:[24,24],children:[Object(u.jsxs)(D.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:[Object(u.jsx)(Si,{level:5,children:"Reference Product"}),Object(u.jsx)(M.a,{onClick:function(){return y(!0)},disabled:o,children:p.product_ref||"Choose..."}),Object(u.jsx)(T.a,{}),Object(u.jsx)(Si,{level:5,children:"Provider"}),Object(u.jsx)(xn.a,{className:"input show4",placeholder:"Provider",disabled:!0,value:(I=p.provider,void 0===I||"Undefined"===I||""===I?"None":p.provider)}),Object(u.jsx)(Si,{level:5,children:"Type of Opening"}),Object(u.jsx)(xn.a,{className:"input show4",placeholder:"Type of Opening",disabled:!0,value:p.itemtype||""}),Object(u.jsx)(Si,{level:5,children:"Type"}),Object(u.jsx)(xn.a,{className:"input show4",placeholder:"Type",disabled:!0,value:p.wintype}),Object(u.jsx)(Si,{level:5,children:"Color"}),Object(u.jsx)(xn.a,{className:"input show1",placeholder:"Frame",disabled:!0,value:p.color}),Object(u.jsx)("div",{className:"flex_container_center block_space",children:Object(u.jsx)(Kt.a.PreviewGroup,{children:Object(u.jsx)(Kt.a,{hidden:void 0===p.image||""===p.image,className:"img",src:""+p.image,alt:p.name})})})]}),Object(u.jsxs)(D.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:[Object(u.jsx)(Si,{level:5,children:"Sizes"}),Object(u.jsxs)("div",{className:"flex_container block_space show4",children:[Object(u.jsx)(Ii,{children:"W:"}),Object(u.jsx)(xn.a,{hidden:!0,value:p.width}),Object(u.jsx)(xn.a,{style:{marginLeft:5,marginRight:15},value:p.widthtxt,disabled:!0}),Object(u.jsx)(Ii,{children:"H:"}),Object(u.jsx)(xn.a,{hidden:!0,value:p.height}),Object(u.jsx)(xn.a,{style:{marginLeft:5,marginRight:15},value:p.heighttxt,disabled:!0}),Object(u.jsx)(Ii,{children:"L:"}),Object(u.jsx)(xn.a,{hidden:!0,value:p.length}),Object(u.jsx)(xn.a,{style:{marginLeft:5},value:p.lengthtxt,disabled:!0})]}),Object(u.jsx)(T.a,{}),Object(u.jsx)(Si,{level:5,children:"Sales Price & Discount %"}),Object(u.jsxs)("div",{className:"flex_container block_space",children:[Object(u.jsx)(Xn.a,{className:"input show4",placeholder:"Price",style:{marginRight:20},disabled:!0,value:p.sales_price,formatter:At}),Object(u.jsx)(Xn.a,{className:"input",placeholder:"Discount",min:0,max:1,step:.01,onBlur:function(e){return P(Object(w.a)(Object(w.a)({},p),{},{sales_discount:It(e.target.value)}))},onStep:function(e){return P(Object(w.a)(Object(w.a)({},p),{},{sales_discount:e}))},formatter:St,parser:It,value:p.sales_discount,disabled:o})]}),Object(u.jsxs)("div",{className:"flex_container block_space show4",children:[Object(u.jsx)(Ii,{children:"Quantity:"}),Object(u.jsx)(Xn.a,{min:1,style:{marginLeft:5},onBlur:function(e){return P(Object(w.a)(Object(w.a)({},p),{},{quantity:Number(e.target.value)}))},onStep:function(e){return P(Object(w.a)(Object(w.a)({},p),{},{quantity:e}))},value:p.quantity,disabled:o})]}),Object(u.jsxs)(Si,{level:5,children:["Final Price: ",At(p.finalprice)]}),Object(u.jsxs)("div",{className:"flex_container_end show4",children:[Object(u.jsx)(M.a,{type:p&&X(p._modified)?"primary":"ghost",shape:"round",icon:Object(u.jsx)(nn.a,{}),size:"large",onClick:function(){_(p)},disabled:o||void 0===p.product_ref,children:i?"Save":"Add"}),Object(u.jsx)(M.a,{type:"primary",shape:"round",icon:Object(u.jsx)(f.a,{}),size:"large",onClick:function(){r&&r()},style:{marginLeft:"20px"},children:"Cancel"})]})]})]})]}),Object(u.jsx)(Ai,{visible:g,currentID:null===(S=p.product_ref,t=s&&S?s[S]:void 0)||void 0===t?void 0:t.id,color:p.color||"",handleCancel:function(){return y(!1)},handleProduct:function(e){y(!1),m(ri(e)).then((function(e){var t=e.payload,n=Object(w.a)(Object(w.a)({},p),{},{_modified:X(p._modified)?p._modified:a.modified,color:t.color,cost_price:t.cost_price||0,height:t.height,heighttxt:t.heighttxt||void 0,image:t.image,inst_price:t.inst_price||0,itemtype:Ae(t.itemtype),length:t.length,lengthtxt:t.lengthtxt||void 0,modtype:t.modtype||ge.Material,name:t.name,product_ref:t.ref,provider:t.provider,sales_price:t.sales_price||0,width:t.width,widthtxt:t.widthtxt||void 0,wintype:t.wintype});P(n)}))}})]})},ki=d.a.Content,Di=function(){var e=Q(),t=Object(c.useState)(void 0),n=Object(N.a)(t,2),i=n[0],r=n[1],o=H(ct),l=Object(b.h)(),s=Object(b.f)();Object(c.useEffect)((function(){l.eid&&void 0===o?e(Ke(Number(l.eid))):r(Object(w.a)(Object(w.a)({},Sn),{},{estimateid:o&&o.id?o.id:0,_modified:a.new}))}),[e,l.eid,o]),Object(c.useEffect)((function(){l.iid&&o&&o.items&&r(o.items.find((function(e){return e.id===Number(l.iid)})))}),[o,l.iid]);var j=ve(o);return Object(u.jsx)(d.a,{className:"material",children:Object(u.jsx)(ki,{className:"materialContainer",children:i?Object(u.jsx)(Pi,{estimate:o,item:i,onClose:function(){s.length>0&&s.goBack()},readOnly:j}):Object(u.jsx)(S.a,{size:"large",style:{display:"flex",alignSelf:"center"}})})})},Ri=hn.a.Option,Mi=function(e){var t=Object(c.useState)(e.currentID),n=Object(N.a)(t,2),a=n[0],r=n[1],o=Object(c.useState)(e.color),l=Object(N.a)(o,2),s=l[0],d=l[1],j=Object(c.useState)(""),m=Object(N.a)(j,2),b=m[0],h=m[1],p=Object(c.useState)(""),v=Object(N.a)(p,2),O=v[0],f=v[1],x=Object(c.useState)(""),g=Object(N.a)(x,2),y=g[0],_=g[1],w=Object(c.useState)(""),C=Object(N.a)(w,2),A=C[0],E=C[1],S=Object(c.useState)(""),I=Object(N.a)(S,2),P=I[0],k=I[1],D=["WHITE","BRONZE","BLACK","CLEAR ANADIS"].map((function(e){return{value:e,label:e}})),R=H(bt),T=H(mt),L=H(li),B=H(si),F=H(ui),Q=Object(c.useCallback)((function(e){return void 0===e||"None"===e||"Any"===e||""===e||"0"===e||0===e}),[]),U=Object(c.useCallback)((function(e,t){return Q(e)?t:e}),[Q]),z=function(e){return B&&e?B[e]:void 0},W=z(e.currentID),K=Object(c.useCallback)((function(){d((null===W||void 0===W?void 0:W.color)||e.color||"Any"),h(U(null===W||void 0===W?void 0:W.provider,"Any")),f(U(null===W||void 0===W?void 0:W.widthtxt,"Any")),_(U(null===W||void 0===W?void 0:W.heighttxt,"Any")),E(U(null===W||void 0===W?void 0:W.lengthtxt,"Any")),k(U(null===W||void 0===W?void 0:W.ref,"None"))}),[null===W||void 0===W?void 0:W.color,null===W||void 0===W?void 0:W.provider,null===W||void 0===W?void 0:W.widthtxt,null===W||void 0===W?void 0:W.heighttxt,null===W||void 0===W?void 0:W.lengthtxt,null===W||void 0===W?void 0:W.ref,e.color,U]),G=Object(c.useCallback)((function(){d(U(e.color,"Any")),h("Any"),f("Any"),_("Any"),E("Any"),k("None")}),[U,e.color]);Object(c.useEffect)((function(){K()}),[e.visible,e.color,K]);var Y=function(e,t){var n=t.value.toLowerCase(),i=e.toLowerCase();return""===i||null!==n&&((null===n||void 0===n?void 0:n.indexOf(i))>=0||n.indexOf(i)>=0)},J=function(e){return e?e.ref:"Any"},X=Object(c.useMemo)((function(){return null===L||void 0===L?void 0:L.filter((function(e){return e.modtype===ge.Design}))}),[L]),Z=Object(c.useCallback)((function(e){var t=!0;return t=(t=(t=(t=(t=t&&(Q(s)||e.color===s))&&(Q(b)||e.provider===b))&&(Q(O)||e.widthtxt===O))&&(Q(y)||e.heighttxt===y))&&(Q(A)||e.lengthtxt===A)}),[s,y,A,b,Q,O]),q=function(e){r(e),k(function(e){var t;return null===(t=z(e))||void 0===t?void 0:t.ref}(e)||"")},V=Object(c.useMemo)((function(){return null===X||void 0===X?void 0:X.filter(Z)}),[Z,X]),$=Object(c.useMemo)((function(){return null===V||void 0===V?void 0:V.map((function(e){return Object(u.jsx)(Ri,{value:J(e),children:J(e)},e.id)}))}),[V]),ee=Object(c.useMemo)((function(){var e={};return null===X||void 0===X||X.forEach((function(t){t.widthtxt&&(e[t.widthtxt]=t.widthtxt)})),Object.keys(e).map((function(e){return Object(u.jsx)(Ri,{value:e,children:e},e)}))}),[X]),te=Object(c.useMemo)((function(){var e={};return null===X||void 0===X||X.forEach((function(t){t.heighttxt&&(e[t.heighttxt]=t.heighttxt)})),Object.keys(e).map((function(e){return Object(u.jsx)(Ri,{value:e,children:e},e)}))}),[X]);return Object(u.jsx)(Ot.a,{title:"Search Products",visible:e.visible,onCancel:e.handleCancel,onOk:function(){return a&&e.handleProduct(a)},okButtonProps:{disabled:!a},footer:[Object(u.jsx)(M.a,{onClick:function(){return a&&e.handleProduct(a)},disabled:Q(P),children:"OK"},"OK"),Object(u.jsx)(M.a,{onClick:e.handleCancel,children:"Cancel"},"Cancel"),Object(u.jsx)(M.a,{onClick:G,style:{marginLeft:"1rem"},children:"Clear"},"Clear")],children:Object(u.jsxs)(hi.a,{name:"product-search",labelCol:{span:8},wrapperCol:{span:16},autoComplete:"off",children:[Object(u.jsx)(hi.a.Item,{label:"Provider",children:Object(u.jsxs)(hn.a,{showSearch:!0,className:"input show1",optionFilterProp:"label",onChange:function(e,t){return h(t.value)},filterOption:Y,value:b,loading:R===i.loading,placeholder:"Select Provider...",children:[Object(u.jsx)(Ri,{value:"Any",children:"Any"},"0"),null===T||void 0===T?void 0:T.providers.map((function(e){return Object(u.jsx)(Ri,{value:e.label,children:e.label},e.value)}))]})}),Object(u.jsx)(hi.a.Item,{label:"Color",children:Object(u.jsxs)(hn.a,{showSearch:!0,className:"input show1",optionFilterProp:"value",onChange:function(e,t){return t&&d(t.key)},filterOption:function(e,t){return!(null===t||void 0===t?void 0:t.value)||t.value.toString().toLowerCase().indexOf(e.toLowerCase())>=0},value:s,children:[Object(u.jsx)(Ri,{value:"Any",children:"Any"},"Any"),D.filter((function(e){return"NONE"!==e.label})).map((function(e){return Object(u.jsx)(Ri,{value:e.label,children:e.label},e.label)}))]})}),Object(u.jsx)(hi.a.Item,{label:"Width",children:Object(u.jsxs)(hn.a,{showSearch:!0,className:"input show1",optionFilterProp:"value",onChange:function(e,t){return t&&f(t.key)},filterOption:function(e,t){return!(null===t||void 0===t?void 0:t.value)||t.value.toString().toLowerCase().indexOf(e.toLowerCase())>=0},value:O,children:[Object(u.jsx)(Ri,{value:"Any",children:"Any"},"Any"),ee]})}),Object(u.jsx)(hi.a.Item,{label:"Height",children:Object(u.jsxs)(hn.a,{showSearch:!0,className:"input show1",optionFilterProp:"value",onChange:function(e,t){return t&&_(t.key)},filterOption:function(e,t){return!(null===t||void 0===t?void 0:t.value)||t.value.toString().toLowerCase().indexOf(e.toLowerCase())>=0},value:y,children:[Object(u.jsx)(Ri,{value:"Any",children:"Any"},"Any"),te]})}),Object(u.jsx)(hi.a.Item,{label:"References ("+(null===$||void 0===$?void 0:$.length)+")",children:Object(u.jsxs)(hn.a,{showSearch:!0,className:"input show1",optionFilterProp:"ref",onChange:function(e,t){return q(t?Number(t.key):0)},filterOption:function(e,t){var n=Q(t.key)?void 0:z(t.key),i=void 0!==n&&Z(n);return i=i&&Y(e,t)},value:P,loading:F===i.loading,placeholder:"Select Product Reference...",children:[Object(u.jsx)(Ri,{value:"None",children:"None"},"0"),$]})})]})})},Ti=d.a.Content,Li=C.a.Title,Bi=C.a.Text,Fi=function(e){var t,n=e.estimate,i=e.item,r=e.onClose,o=e.readOnly,l=H(li),s=H(di),j=H(mt),m=Q(),b=Object(c.useState)((function(){return function(e){return e?Object(w.a)({},e):Object(w.a)({},Pn)}(i)})),h=Object(N.a)(b,2),p=h[0],v=h[1],O=Object(c.useState)(!1),x=Object(N.a)(O,2),g=x[0],y=x[1];Object(c.useEffect)((function(){0===(null===j||void 0===j?void 0:j.colors.length)&&m(ut())}),[m,j]),Object(c.useEffect)((function(){void 0!==l&&0!==l.length||m(ci())}),[m,l]),jn(n,i);var _=function(e){e&&C(e),r&&r()},C=function(){var e=Object(W.a)(z.a.mark((function e(t){var n;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!J(t._modified)||0!==t.id){e.next=5;break}return e.next=3,m(at(t));case 3:e.next=7;break;case 5:return e.next=7,m(tt(t));case 7:(n=Oi.getState().estimates.estimate)&&n.id&&m(Xe(n)).then((function(e){return A.a.success({message:"Save Estimate",description:"Success!",duration:10})}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(p&&n){var E=kn(n,p,null===n||void 0===n?void 0:n.customer);p.sales_price===E.sales_price&&p.finalprice===E.finalprice||v(Object(w.a)(Object(w.a)({},p),{},{sales_price:E.sales_price,finalprice:E.finalprice}))}var S,I,P=function(e){v(Object(w.a)(Object(w.a)({},e),{},{_modified:J(e._modified)?a.new:a.modified}))};return Object(u.jsxs)(d.a,{className:"layout",children:[Object(u.jsxs)(Ti,{children:[Object(u.jsx)(Li,{level:2,style:{color:"#32445e"},children:"Design"}),Object(u.jsxs)(k.a,{gutter:[24,24],children:[Object(u.jsxs)(D.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:[Object(u.jsx)(Li,{level:5,children:"Reference Product"}),Object(u.jsx)(M.a,{onClick:function(){return y(!0)},disabled:o,children:p.product_ref||"Choose..."}),Object(u.jsx)(T.a,{}),Object(u.jsx)(Li,{level:5,children:"Provider"}),Object(u.jsx)(xn.a,{className:"input show4",placeholder:"Provider",disabled:!0,value:(I=p.provider,void 0===I||"Undefined"===I||""===I?"None":p.provider)}),Object(u.jsx)(Li,{level:5,children:"Type of Opening"}),Object(u.jsx)(xn.a,{className:"input show4",placeholder:"Type of Opening",disabled:!0,value:p.itemtype||""}),Object(u.jsx)(Li,{level:5,children:"Type"}),Object(u.jsx)(xn.a,{className:"input show4",placeholder:"Type",disabled:!0,value:p.wintype}),Object(u.jsx)(Li,{level:5,children:"Color"}),Object(u.jsx)(xn.a,{className:"input show1",placeholder:"Frame",disabled:!0,value:p.color}),Object(u.jsx)("div",{className:"flex_container_center block_space",children:Object(u.jsx)(Kt.a.PreviewGroup,{children:Object(u.jsx)(Kt.a,{hidden:void 0===p.image||""===p.image,className:"img",src:""+p.image,alt:p.name})})})]}),Object(u.jsxs)(D.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:[Object(u.jsx)(Li,{level:5,children:"Sizes"}),Object(u.jsxs)("div",{className:"flex_container block_space show4",children:[Object(u.jsx)(Bi,{children:"W:"}),Object(u.jsx)(xn.a,{hidden:!0,value:p.width}),Object(u.jsx)(xn.a,{style:{marginLeft:5,marginRight:15},value:p.widthtxt,disabled:!0}),Object(u.jsx)(Bi,{children:"H:"}),Object(u.jsx)(xn.a,{hidden:!0,value:p.height}),Object(u.jsx)(xn.a,{style:{marginLeft:5,marginRight:15},value:p.heighttxt,disabled:!0})]}),Object(u.jsx)(T.a,{}),Object(u.jsx)(Li,{level:5,children:"Sales Price & Discount %"}),Object(u.jsxs)("div",{className:"flex_container block_space",children:[Object(u.jsx)(Xn.a,{className:"input show4",placeholder:"Price",style:{marginRight:20},disabled:!0,value:p.sales_price,formatter:At}),Object(u.jsx)(Xn.a,{className:"input",placeholder:"Discount",min:0,max:1,step:.01,onBlur:function(e){return P(Object(w.a)(Object(w.a)({},p),{},{sales_discount:It(e.target.value)}))},onStep:function(e){return P(Object(w.a)(Object(w.a)({},p),{},{sales_discount:e}))},formatter:St,parser:It,value:p.sales_discount,disabled:o})]}),Object(u.jsxs)(Li,{level:5,children:["Final Price: ",At(p.finalprice)]}),Object(u.jsxs)("div",{className:"flex_container_end show4",children:[Object(u.jsx)(M.a,{type:p&&X(p._modified)?"primary":"ghost",shape:"round",icon:Object(u.jsx)(nn.a,{}),size:"large",onClick:function(){_(p)},disabled:o||void 0===p.product_ref,children:i?"Save":"Add"}),Object(u.jsx)(M.a,{type:"primary",shape:"round",icon:Object(u.jsx)(f.a,{}),size:"large",onClick:function(){r&&r()},style:{marginLeft:"20px"},children:"Cancel"})]})]})]})]}),Object(u.jsx)(Mi,{visible:g,currentID:null===(S=p.product_ref,t=s&&S?s[S]:void 0)||void 0===t?void 0:t.id,color:p.color||"",handleCancel:function(){return y(!1)},handleProduct:function(e){y(!1),m(ri(e)).then((function(e){var t=e.payload,n=Object(w.a)(Object(w.a)({},p),{},{_modified:X(p._modified)?p._modified:a.modified,color:t.color,cost_price:t.cost_price||0,height:t.height,heighttxt:t.heighttxt||void 0,image:t.image,inst_price:t.inst_price||0,itemtype:Ae(t.itemtype),modtype:t.modtype||ge.Design,name:t.name,product_ref:t.ref,provider:t.provider,sales_price:t.sales_price||0,width:t.width,widthtxt:t.widthtxt||void 0,wintype:t.wintype});P(n)}))}})]})},Qi=d.a.Content,Hi=function(){var e=Q(),t=Object(c.useState)(void 0),n=Object(N.a)(t,2),i=n[0],r=n[1],o=H(ct),l=Object(b.h)(),s=Object(b.f)();Object(c.useEffect)((function(){l.eid&&void 0===o?e(Ke(Number(l.eid))):r(Object(w.a)(Object(w.a)({},Pn),{},{estimateid:o&&o.id?o.id:0,_modified:a.new}))}),[e,l.eid,o]),Object(c.useEffect)((function(){l.iid&&o&&o.items&&r(o.items.find((function(e){return e.id===Number(l.iid)})))}),[o,l.iid]);var j=ve(o);return Object(u.jsx)(d.a,{className:"design",children:Object(u.jsx)(Qi,{className:"designContainer",children:i?Object(u.jsx)(Fi,{estimate:o,item:i,onClose:function(){s.length>0&&s.goBack()},readOnly:j}):Object(u.jsx)(S.a,{size:"large",style:{display:"flex",alignSelf:"center"}})})})},Ui=n(465),zi=Object(w.a)(Object(w.a)({},En),{},{itemtype:Se.Hardware,modtype:ge.Hardware,provider:void 0,product_ref:void 0,hardwaretype:void 0,configuration:void 0,wintype:ke.None}),Wi=d.a.Content,Ki=C.a.Title,Gi=hn.a.Option,Yi=function(e){var t=e.estimate,n=e.item,r=e.onClose,o=e.readOnly,l=H(li),s=H(si),j=H(di),m=H(ui),h=H(mt),p=H(bt),v=Q(),O=Object(b.f)(),x=Object(c.useState)((function(){return function(e){return e?Object(w.a)({},e):Object(w.a)({},zi)}(n)})),g=Object(N.a)(x,2),y=g[0],_=g[1];Object(c.useEffect)((function(){0===(null===h||void 0===h?void 0:h.colors.length)&&v(ut())}),[v,h]),Object(c.useEffect)((function(){void 0!==l&&0!==l.length||v(ci())}),[v,l]),jn(t,n);var C=function(){var e=Object(W.a)(z.a.mark((function e(){var t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!J(y._modified)||0!==y.id){e.next=5;break}return e.next=3,v(at(y));case 3:e.next=7;break;case 5:return e.next=7,v(tt(y));case 7:(t=Oi.getState().estimates.estimate)&&t.id&&v(Xe(t)).then((function(e){return A.a.success({message:"Save Estimate",description:"Success!",duration:10})})),r&&r();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(e){return e?e.id+" - "+e.name+" - "+e.ref:"None"},S=function(e){return void 0===e||"None"===e||""===e},I=function(e,t){var n=t.value.toLowerCase(),i=e.toLowerCase();return""===i||null!==n&&((null===n||void 0===n?void 0:n.indexOf(i))>=0||n.indexOf(i)>=0)},P=function(e){var t=S(y.provider)||e.provider===y.provider;return t=t&&e.modtype===ge.Hardware};if(y&&t){var R=function(e,t,n){if(t){var i=Math.round(100*((t.cost_price||0)+(t.cost_price||0)*ne(null===n||void 0===n?void 0:n.reltype)))/100;return{sales_price:i,finalprice:i-(t.cost_price||0)*(t.sales_discount||0)+(e.is_installation_included?(t.inst_price||0)-(t.inst_price||0)*(t.inst_discount||0):0)}}return{sales_price:0,finalprice:0}}(t,y,null===t||void 0===t?void 0:t.customer);y.sales_price===R.sales_price&&y.finalprice===R.finalprice||_(Object(w.a)(Object(w.a)({},y),{},{sales_price:R.sales_price,finalprice:R.finalprice}))}var L,B=function(e){_(Object(w.a)(Object(w.a)({},e),{},{_modified:J(e._modified)?a.new:a.modified}))};return Object(u.jsx)(d.a,{className:"layout",children:Object(u.jsxs)(Wi,{children:[Object(u.jsx)(Ki,{level:2,style:{color:"#32445e"},children:"Hardware"}),Object(u.jsxs)(k.a,{gutter:[24,24],children:[Object(u.jsxs)(D.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:[Object(u.jsx)(Ki,{level:5,children:"Provider"}),Object(u.jsxs)(hn.a,{showSearch:!0,className:"input show1",optionFilterProp:"label",onChange:function(e,t){return B(Object(w.a)(Object(w.a)({},y),{},{provider:t.value}))},filterOption:I,value:S(y.provider)?"None":y.provider,loading:p===i.loading,placeholder:"Select Provider...",disabled:o,children:[Object(u.jsx)(Gi,{value:"None",children:"None"},"None"),null===h||void 0===h?void 0:h.providers.map((function(e){return Object(u.jsx)(Gi,{value:e.label,children:e.label},e.value)}))]}),p===i.failed?Object(u.jsx)(Vt.a,{style:{marginLeft:"1rem",display:"flex",alignSelf:"center"}}):null,Object(u.jsx)(Ki,{level:5,children:"Reference"}),Object(u.jsxs)(hn.a,{showSearch:!0,className:"input show1",optionFilterProp:"ref",onChange:function(e,t){return t&&(n=Number(t.key),void v(ri(n)).then((function(e){var t=e.payload,n=Object(w.a)(Object(w.a)({},y),{},{_modified:X(y._modified)?y._modified:a.modified,color:t.color,image:t.image,inst_price:t.inst_price||0,name:t.name,product_ref:t.ref,provider:t.provider,cost_price:t.cost_price||0,sales_price:t.sales_price||0,configuration:t.configuration,hardwaretype:t.hardwaretype});B(n)})));var n},filterOption:function(e,t){var n,i=S(t.key)?void 0:(n=t.key,s?s[n]:void 0),a=void 0!==i&&P(i);return a=a&&I(e,t)},value:E((L=y.product_ref,j&&L?j[L]:void 0)),loading:m===i.loading,placeholder:"Select Product Reference...",disabled:o,children:[Object(u.jsx)(Gi,{value:"None",children:"None"},"0"),null===l||void 0===l?void 0:l.filter(P).map((function(e){return Object(u.jsx)(Gi,{value:E(e),children:E(e)},e.id)}))]}),Object(u.jsx)(T.a,{}),Object(u.jsx)(Ki,{level:5,children:"Hardware Type"}),Object(u.jsx)(xn.a,{className:"input show4",placeholder:"Hardware Type",disabled:!0,value:null===y||void 0===y?void 0:y.hardwaretype}),Object(u.jsx)(Ki,{level:5,children:"Configuration"}),Object(u.jsx)(xn.a,{className:"input show3",placeholder:"Configuration",disabled:!0,value:null===y||void 0===y?void 0:y.configuration}),Object(u.jsx)(Ki,{level:5,children:"Color"}),Object(u.jsx)(xn.a,{className:"input show1",placeholder:"Color",disabled:!0,value:null===y||void 0===y?void 0:y.color})]}),Object(u.jsxs)(D.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:[(null===t||void 0===t?void 0:t.is_installation_included)?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Ki,{level:5,children:"Installation & Discount %"}),Object(u.jsxs)("div",{className:"flex_container block_space show1",children:[Object(u.jsx)(Xn.a,{className:"input",placeholder:"Installation",style:{marginRight:20},disabled:!0,formatter:At,value:y.inst_price}),Object(u.jsx)(Xn.a,{className:"input",placeholder:"Discount",min:0,max:1,step:.01,onBlur:function(e){return B(Object(w.a)(Object(w.a)({},y),{},{inst_discount:It(e.target.value)}))},onStep:function(e){return B(Object(w.a)(Object(w.a)({},y),{},{inst_discount:e}))},formatter:St,parser:It,value:y.inst_discount,disabled:o})]})]}):"",Object(u.jsx)(Ki,{level:5,children:"Sales Price & Discount %"}),Object(u.jsxs)("div",{className:"flex_container block_space",children:[Object(u.jsx)(Xn.a,{className:"input show4",placeholder:"Price",style:{marginRight:20},disabled:!0,formatter:At,value:y.sales_price}),Object(u.jsx)(Xn.a,{className:"input",placeholder:"Discount",min:0,max:1,step:.01,onBlur:function(e){return B(Object(w.a)(Object(w.a)({},y),{},{sales_discount:It(e.target.value)}))},onStep:function(e){return B(Object(w.a)(Object(w.a)({},y),{},{sales_discount:e}))},formatter:St,parser:It,value:y.sales_discount,disabled:o})]}),Object(u.jsxs)(Ki,{level:5,children:["Final Price: ",At(y.finalprice)]}),Object(u.jsx)(T.a,{}),Object(u.jsx)("div",{className:"flex_container_center block_space",children:Object(u.jsx)(Kt.a.PreviewGroup,{children:Object(u.jsx)(Kt.a,{hidden:void 0===y.image||""===y.image,className:"img",src:""+y.image,alt:y.name})})})]}),Object(u.jsx)(D.a,{xs:24,sm:24,md:12,lg:12,xl:12}),Object(u.jsx)(D.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(u.jsx)("div",{className:"flex_container_center show4",children:Object(u.jsxs)(Ui.a,{placement:"top",title:"Do you want to include a hardware?",onConfirm:function(){O.goBack()},okText:"Yes",cancelText:"No",children:[Object(u.jsx)(M.a,{type:y&&X(y._modified)?"primary":"ghost",shape:"round",icon:Object(u.jsx)(nn.a,{}),size:"large",onClick:function(){return C()},disabled:o||void 0===y.product_ref,children:y?"Save":"Add"}),Object(u.jsx)(M.a,{type:"primary",shape:"round",icon:Object(u.jsx)(f.a,{}),size:"large",onClick:function(){r&&r()},style:{marginLeft:"20px"},children:"Cancel"})]})})})]})]})})},Ji=d.a.Content,Xi=function(){var e=Q(),t=Object(c.useState)(void 0),n=Object(N.a)(t,2),i=n[0],r=n[1],o=H(ct),l=Object(b.h)(),s=Object(b.f)();Object(c.useEffect)((function(){l.eid&&void 0===o?e(Ke(Number(l.eid))):r(Object(w.a)(Object(w.a)({},zi),{},{estimateid:o&&o.id?o.id:0,_modified:a.new}))}),[e,l.eid,o]),Object(c.useEffect)((function(){l.iid&&o&&o.items&&r(o.items.find((function(e){return e.id===Number(l.iid)})))}),[o,l.iid]);var j=ve(o);return Object(u.jsx)(d.a,{className:"hardware",children:Object(u.jsx)(Ji,{className:"hardwareContainer",children:i?Object(u.jsx)(Yi,{estimate:o,item:i,onClose:s.length>0?function(){return s.goBack()}:void 0,readOnly:j}):Object(u.jsx)(S.a,{size:"large",style:{display:"flex",alignSelf:"center"}})})})},Zi=function(e){var t=e.getMenuItems,n=fa(),i=Object(b.f)(),a=Object(b.h)().eid;return Object(u.jsxs)(B.b,{direction:"vertical",align:"center",style:{width:"100%",marginTop:"4em"},children:[Object(u.jsx)(_t.a,{children:"Please do not print this page."}),Object(u.jsx)(M.a,{type:"primary",onClick:function(){return i.goBack()},style:{marginBottom:"4em"},children:"Back"}),t(Number(a),n).map((function(e){if("div"===e)return Object(u.jsx)(T.a,{style:{margin:"1em 0em",width:"10em"}});var t=e;return Object(u.jsx)(M.a,{type:"primary",onClick:t.onclick,children:t.title})}))]})},qi={xs:2,sm:8,md:8,lg:12,xl:12},Vi={xs:14,sm:10,md:10,lg:8,xl:8},$i={xs:8,sm:6,md:6,lg:4,xl:4},ea=function(e){return Object(u.jsx)(D.a,Object(w.a)(Object(w.a)({},qi),{},{className:e.className}))},ta=function(e){return Object(u.jsx)(D.a,Object(w.a)(Object(w.a)({},Vi),{},{className:e.className,children:Object(u.jsx)(_t.a,{level:3,children:e.children})}))},na=function(e){return Object(u.jsx)(D.a,Object(w.a)(Object(w.a)({},$i),{},{style:{textAlign:"right"},className:e.className,children:Object(u.jsx)(gt.a,{children:e.children})}))},ia=function(e){var t=e.totals;return Object(u.jsxs)(k.a,{className:"invoice-totals-table",gutter:[24,4],children:[Object(u.jsx)(ea,{}),Object(u.jsx)(ta,{children:"Total Amount"}),Object(u.jsx)(na,{children:At(t.finalPrice)})]})},aa=C.a.Title,ca=C.a.Text,ra=function(e){for(var t in e)if(e[t]===i.failed)return!0;return!1},oa="",la=function(e){var t,n=e.viewMenu,a=Q(),r=H(mt),o=H(ht),l=H(ct),s=Object(b.h)(),d=Object(c.useState)([]),j=Object(N.a)(d,2),m=j[0],h=j[1],p={customer:H(le),customerDetail:H(de),estimate:H(rt),estimateError:H(ot),default:H(bt)};ra(p)&&""===oa&&(oa=p.estimateError,E.b.error(p.estimateError,void 0,(function(){oa=""}))),Object(c.useEffect)((function(){void 0===l&&(null===r||void 0===r?void 0:r.user.name)&&a(Ke(Number(s.eid)))}),[a,s.eid,l,null===r||void 0===r?void 0:r.user.name]),Object(c.useEffect)((function(){0===(null===r||void 0===r?void 0:r.colors.length)&&a(ut())}),[a,r]);var v=function(e){var t=e.item,n=e.readOnly,i=function(e){return a(tt(Object(w.a)(Object(w.a)({},t),{},{itemno:e})))},c=function(e){return a(tt(Object(w.a)(Object(w.a)({},t),{},{quantity:e})))};if(l)switch(t.modtype){case ge.ImpactProduct:return Object(u.jsx)(Jt,{readOnly:n,e:l,item:t,onUpdateQuantity:c,onUpdateItemNo:i});case ge.Hardware:return Object(u.jsx)(Xt,{readOnly:n,e:l,item:t,onUpdateQuantity:c,onUpdateItemNo:i});case ge.Material:return Object(u.jsx)(Dn,{readOnly:n,e:l,item:t,onUpdateQuantity:c,onUpdateItemNo:i});case ge.Design:return Object(u.jsx)(Rn,{readOnly:n,e:l,item:t,onUpdateQuantity:c,onUpdateItemNo:i})}return Object(u.jsxs)("span",{children:["Unknown Product: ",t.modtype]})},O=function(e){var t="Opening ".concat(e.itemno,": ").concat(e.name);if(e.modtype===ge.ImpactProduct){var n,i,a=e,c=o(null===(n=a.roomtype)||void 0===n?void 0:n.toString());c&&"Unknown"!==c||(c="Room"),t+=" - ".concat(c," ").concat(null!==(i=a.roomnum)&&void 0!==i?i:" number missing")}return t+=" - ".concat(At(e.sales_price)),X(e._modified)?Object(u.jsx)(ca,{italic:!0,strong:!0,children:t}):Object(u.jsx)(ca,{children:t})},f=!0,x=null===l||void 0===l||null===(t=l.items)||void 0===t?void 0:t.filter((function(e){return!Z(e._modified)})),g=null;(function(e){if(!ra(e))for(var t in e)if(e[t]===i.loading)return!0;return!1})(p)&&(g=Object(u.jsx)("div",{className:"flex_container_center show4",children:Object(u.jsx)(S.a,{style:{marginLeft:"1rem",display:"flex",alignSelf:"center"},size:"large"})})),ra(p)&&(g=Object(u.jsx)("div",{className:"flex_container_center show4",children:Object(u.jsx)(Vt.a,{style:{marginLeft:"1rem",display:"flex",alignSelf:"center"}})})),function(e){for(var t in e)if(![i.succeeded,i.unavailable,i.saving,""].includes(e[t]))return!1;return!0}(p)&&(g=void 0===x||0===x.length?Object(u.jsx)("div",{className:"flex_container_center show4",children:Object(u.jsx)(I.a,{image:I.a.PRESENTED_IMAGE_SIMPLE,description:"Empty",style:{margin:"0px"}})}):Object(u.jsx)(P.a,{activeKey:m,onChange:function(e){return h(e)},children:x.sort((function(e,t){var n,i;return(null!==(n=e.itemno)&&void 0!==n?n:0)-(null!==(i=t.itemno)&&void 0!==i?i:0)})).map((function(e,t){return Object(u.jsx)(P.a.Panel,{className:"item-summary",header:O(e),extra:Object(u.jsx)(Gt,{readOnly:f,item:e,itemIndex:t+1}),children:Object(u.jsx)(v,{item:e,readOnly:f})},t)}))}));var y=qt(l,(null===l||void 0===l?void 0:l.add_sales_discount)||0,(null===l||void 0===l?void 0:l.add_inst_discount)||0,(null===l||void 0===l?void 0:l.permits)||0,(null===l||void 0===l?void 0:l.salestax)||0),_=Object(u.jsx)(Nn,{estimate:l,isFailed:ra(p)});return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(k.a,{children:Object(u.jsxs)(D.a,{xs:24,children:[Object(u.jsx)(aa,{level:3,style:{color:"#32445e",textAlign:"center",float:"left",width:"100%"},children:"Invoice"}),l&&l.id&&n(l.id)]})}),_,Object(u.jsx)(k.a,{children:Object(u.jsxs)(D.a,{xs:24,sm:24,md:24,lg:24,xl:24,children:[Object(u.jsx)(T.a,{}),Object(u.jsxs)("div",{className:"expand-collapse-buttons",children:[Object(u.jsx)(M.a,{type:"link",onClick:function(){return h(x?null===x||void 0===x?void 0:x.map((function(e,t){return t.toString()})):[])},children:"Expand all"})," | ",Object(u.jsx)(M.a,{type:"link",onClick:function(){return h([])},children:"Collapse all"})]}),g,Object(u.jsx)(T.a,{}),Object(u.jsx)(aa,{className:"hide-on-print",level:5,children:"Internal Notes:"}),Object(u.jsx)(dn.a,{showCount:!0,placeholder:"Internal Notes",className:"hide-on-print",style:{marginBottom:"2rem"},autoSize:!0,maxLength:1024,value:null===l||void 0===l?void 0:l.notes,readOnly:f}),Object(u.jsx)(aa,{level:5,children:"Additional Notes:"}),Object(u.jsx)(dn.a,{showCount:!0,placeholder:"Notes",style:{marginBottom:"2rem"},autoSize:!0,maxLength:1024,value:null===l||void 0===l?void 0:l.public_notes,readOnly:f})]})}),Object(u.jsx)(ia,{totals:y}),Object(u.jsx)(T.a,{}),Object(u.jsx)(k.a,{children:Object(u.jsx)(D.a,{xs:24,sm:24,md:24,lg:24,xl:24,children:Object(u.jsx)(pn,{readOnly:f})})}),Object(u.jsx)(B.b,{direction:"vertical",align:"center",style:{width:"100%",marginTop:"1rem"},className:"show-on-print",children:Object(u.jsx)(L.a,{description:Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(aa,{level:5,style:{color:"red"},children:"There will be a 3% charge for using a credit card"})}),type:"info",style:{textAlign:"center",backgroundColor:"white",border:"0"}})})]})},sa=function(e){var t=e.viewMenu;return Object(u.jsx)(d.a,{className:"print-estimate",children:Object(u.jsxs)(_.Content,{className:"estimateContainer",children:[Object(u.jsx)(Yn,{}),Object(u.jsx)(la,{viewMenu:t})]})})},da=function(e){return Object(u.jsx)(D.a,{xs:e.width,md:e.width/4,className:"signature-title-cell"+(e.className?" "+e.className+"-cell":""),children:Object(u.jsx)("div",{className:"signature-title-text"+(e.className?" "+e.className+"-text":""),children:e.children})})},ua=function(e){return Object(u.jsx)(D.a,{xs:e.width,md:3*e.width/4,className:"signature-name-cell"+(e.className?" "+e.className+"-cell":""),children:Object(u.jsx)("div",{className:"signature-name-text"+(e.className?" "+e.className+"-text":""),children:e.children})})},ja=function(e){var t=e.title,n=e.name,i=e.className,a=e.width;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(da,{width:a,className:i,children:[t,":"]}),Object(u.jsx)(ua,{width:a,className:i,children:n})]})},ma=C.a.Title,ba=C.a.Text,ha=function(e){for(var t in e)if(e[t]===i.failed)return!0;return!1},pa="",va=function(e){var t,n,a=e.viewMenu,r=Q(),o=H(mt),l=H(ht),s=H(ct),d=Object(b.h)(),j=Object(c.useState)([]),m=Object(N.a)(j,2),h=m[0],p=m[1],v={customer:H(le),customerDetail:H(de),estimate:H(rt),estimateError:H(ot),default:H(bt)};ha(v)&&""===pa&&(pa=v.estimateError,E.b.error(v.estimateError,void 0,(function(){pa=""}))),Object(c.useEffect)((function(){void 0===s&&(null===o||void 0===o?void 0:o.user.name)&&r(Ke(Number(d.eid)))}),[r,d.eid,s,null===o||void 0===o?void 0:o.user.name]),Object(c.useEffect)((function(){0===(null===o||void 0===o?void 0:o.colors.length)&&r(ut())}),[r,o]);var O=function(e){var t=e.item,n=e.readOnly,i=function(e){return r(tt(Object(w.a)(Object(w.a)({},t),{},{itemno:e})))},a=function(e){return r(tt(Object(w.a)(Object(w.a)({},t),{},{quantity:e})))};if(s)switch(t.modtype){case ge.ImpactProduct:return Object(u.jsx)(Jt,{readOnly:n,e:s,item:t,onUpdateQuantity:a,onUpdateItemNo:i});case ge.Hardware:return Object(u.jsx)(Xt,{readOnly:n,e:s,item:t,onUpdateQuantity:a,onUpdateItemNo:i});case ge.Material:return Object(u.jsx)(Dn,{readOnly:n,e:s,item:t,onUpdateQuantity:a,onUpdateItemNo:i});case ge.Design:return Object(u.jsx)(Rn,{readOnly:n,e:s,item:t,onUpdateQuantity:a,onUpdateItemNo:i})}return Object(u.jsxs)("span",{children:["Unknown Product: ",t.modtype]})},f=function(e){var t="Opening ".concat(e.itemno,": ").concat(e.name);if(e.modtype===ge.ImpactProduct){var n,i,a=e,c=l(null===(n=a.roomtype)||void 0===n?void 0:n.toString());c&&"Unknown"!==c||(c="Room"),t+=" - ".concat(c," ").concat(null!==(i=a.roomnum)&&void 0!==i?i:" number missing")}return t+=" - ".concat(At(e.sales_price)),X(e._modified)?Object(u.jsx)(ba,{italic:!0,strong:!0,children:t}):Object(u.jsx)(ba,{children:t})},x=!0,g=null===s||void 0===s||null===(t=s.items)||void 0===t?void 0:t.filter((function(e){return!Z(e._modified)})),y=null;(function(e){if(!ha(e))for(var t in e)if(e[t]===i.loading)return!0;return!1})(v)&&(y=Object(u.jsx)("div",{className:"flex_container_center show4",children:Object(u.jsx)(S.a,{style:{marginLeft:"1rem",display:"flex",alignSelf:"center"},size:"large"})})),ha(v)&&(y=Object(u.jsx)("div",{className:"flex_container_center show4",children:Object(u.jsx)(Vt.a,{style:{marginLeft:"1rem",display:"flex",alignSelf:"center"}})})),function(e){for(var t in e)if(![i.succeeded,i.unavailable,i.saving,""].includes(e[t]))return!1;return!0}(v)&&(y=void 0===g||0===g.length?Object(u.jsx)("div",{className:"flex_container_center show4",children:Object(u.jsx)(I.a,{image:I.a.PRESENTED_IMAGE_SIMPLE,description:"Empty",style:{margin:"0px"}})}):Object(u.jsx)(P.a,{activeKey:h,onChange:function(e){return p(e)},children:g.sort((function(e,t){var n,i;return(null!==(n=e.itemno)&&void 0!==n?n:0)-(null!==(i=t.itemno)&&void 0!==i?i:0)})).map((function(e,t){return Object(u.jsx)(P.a.Panel,{className:"item-summary",header:f(e),extra:Object(u.jsx)(Gt,{readOnly:x,item:e,itemIndex:t+1}),children:Object(u.jsx)(O,{item:e,readOnly:x})},t)}))}));var _=qt(s,(null===s||void 0===s?void 0:s.add_sales_discount)||0,(null===s||void 0===s?void 0:s.add_inst_discount)||0,(null===s||void 0===s?void 0:s.permits)||0,(null===s||void 0===s?void 0:s.salestax)||0),C=Object(u.jsx)(Nn,{estimate:s,isFailed:ha(v)});return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(k.a,{children:Object(u.jsxs)(D.a,{xs:24,children:[Object(u.jsx)(ma,{level:3,style:{color:"#32445e",textAlign:"center",float:"left",width:"100%"},children:"Contract"}),s&&s.id&&a(s.id)]})}),C,Object(u.jsx)(k.a,{children:Object(u.jsxs)(D.a,{xs:24,sm:24,md:24,lg:24,xl:24,children:[Object(u.jsx)(T.a,{}),Object(u.jsxs)("div",{className:"expand-collapse-buttons",children:[Object(u.jsx)(M.a,{type:"link",onClick:function(){return p(g?null===g||void 0===g?void 0:g.map((function(e,t){return t.toString()})):[])},children:"Expand all"})," | ",Object(u.jsx)(M.a,{type:"link",onClick:function(){return p([])},children:"Collapse all"})]}),y,Object(u.jsx)(T.a,{}),Object(u.jsx)(ma,{className:"hide-on-print",level:5,children:"Internal Notes:"}),Object(u.jsx)(dn.a,{showCount:!0,placeholder:"Internal Notes",className:"hide-on-print",style:{marginBottom:"2rem"},autoSize:!0,maxLength:1024,value:null===s||void 0===s?void 0:s.notes,readOnly:x}),Object(u.jsx)(ma,{level:5,children:"Additional Notes:"}),Object(u.jsx)(dn.a,{showCount:!0,placeholder:"Notes",style:{marginBottom:"2rem"},autoSize:!0,maxLength:1024,value:null===s||void 0===s?void 0:s.public_notes,readOnly:x})]})}),Object(u.jsx)(Qt,{totals:_,includeInstallation:(null===s||void 0===s?void 0:s.is_installation_included)||!1,readOnly:x}),Object(u.jsx)(T.a,{}),Object(u.jsx)(k.a,{children:Object(u.jsx)(D.a,{xs:24,sm:24,md:24,lg:24,xl:24,children:Object(u.jsx)(pn,{readOnly:x})})}),Object(u.jsx)(B.b,{direction:"vertical",align:"center",style:{width:"100%",marginTop:"1rem"},className:"show-on-print",children:Object(u.jsx)(L.a,{description:Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(ma,{level:5,style:{color:"red"},children:"There will be a 3% charge for using a credit card"})}),type:"info",style:{textAlign:"center",backgroundColor:"white",border:"0"}})}),Object(u.jsxs)(k.a,{children:[Object(u.jsx)(ja,{title:"Qualifier",name:(null===s||void 0===s?void 0:s.qualifiername)||"",className:"qualifier",width:12}),Object(u.jsx)(ja,{title:"Accepted By",name:(null===s||void 0===s||null===(n=s.customer)||void 0===n?void 0:n.customername)||"",className:"accepted-by",width:12}),Object(u.jsx)(ja,{title:"Representative",name:(null===s||void 0===s?void 0:s.vendor)||"",className:"representative",width:12})]})]})},Oa=function(e){var t=e.viewMenu;return Object(u.jsx)(d.a,{className:"print-estimate",children:Object(u.jsxs)(_.Content,{className:"estimateContainer",children:[Object(u.jsx)(Yn,{}),Object(u.jsx)(va,{viewMenu:t})]})})},fa=function(){var e=Object(b.f)(),t=Object(b.g)();return Object(c.useMemo)((function(){return{canPrint:function(){return t.pathname.startsWith("/estimate")||t.pathname.startsWith("/invoice")||t.pathname.startsWith("/contract")},showEstimate:function(t){return e.push("/".concat(t))},showPrintableEstimate:function(t){return e.push("/estimate/".concat(t))},showInvoice:function(t){return e.push("/invoice/".concat(t))},showContract:function(t){return e.push("/contract/".concat(t))},showNoPrint:function(){return e.push(t.pathname.replace("/","/noprint/"))},closeEstimate:function(){e.push("/"),window.location.href=window.location.href+"../list.php"},getMenuKey:function(){return t.pathname.startsWith("/estimate")?"estimate":t.pathname.startsWith("/invoice")?"invoice":t.pathname.startsWith("/contract")?"contract":"home"}}}),[e,t])},xa=function(e,t){return[{key:"home",title:"Home",icon:Object(u.jsx)(h.a,{}),onclick:function(){return t.showEstimate(e)}},{key:"estimate",title:"Print Estimate",icon:Object(u.jsx)(p.a,{}),onclick:function(){return t.showPrintableEstimate(e)}},{key:"invoice",title:"Print Invoice",icon:Object(u.jsx)(v.a,{}),onclick:function(){return t.showInvoice(e)}},{key:"contract",title:"Print Contract",icon:Object(u.jsx)(O.a,{}),onclick:function(){return t.showContract(e)}},"div",{key:"close",title:"Close Estimate",icon:Object(u.jsx)(f.a,{}),onclick:function(){return t.closeEstimate()}}]},ga=function(){var e=fa(),t=e.getMenuKey(),n=function(){e.canPrint()||e.showNoPrint()};Object(c.useEffect)((function(){return window.addEventListener("beforeprint",n),function(){return window.removeEventListener("beforeprint",n)}}));var i=function(n){return Object(u.jsx)(g.a,{selectedKeys:[t],children:xa(n,e).map((function(e,t){if("div"===e)return Object(u.jsx)(g.a.Divider,{style:{margin:".5em 0em"}},""+t);var n=e;return Object(u.jsx)(g.a.Item,{icon:n.icon,onClick:n.onclick,children:n.title},n.key)}))})},a=function(e){return Object(u.jsx)(y.a.Button,{overlay:i(e),icon:Object(u.jsx)(x.a,{}),style:{marginLeft:"-5em",marginTop:".5em"},className:"hide-on-print-only"})};return Object(u.jsx)("div",{className:"estimatesv2",children:Object(u.jsx)(c.Suspense,{fallback:Object(u.jsx)("h1",{children:"Loading"}),children:Object(u.jsx)(m,{children:Object(u.jsxs)(b.c,{children:[Object(u.jsx)(b.a,{exact:!0,path:"/hardware/:eid?/:iid?",component:Xi}),Object(u.jsx)(b.a,{path:"/impact/:eid?/:iid?",component:Ni}),Object(u.jsx)(b.a,{path:"/material/:eid?/:iid?",component:Di}),Object(u.jsx)(b.a,{path:"/design/:eid?/:iid?",component:Hi}),Object(u.jsx)(b.a,{path:"/estimate/:eid?",children:Object(u.jsx)(Jn,{viewMenu:a})}),Object(u.jsx)(b.a,{path:"/invoice/:eid?",children:Object(u.jsx)(sa,{viewMenu:a})}),Object(u.jsx)(b.a,{path:"/Contract/:eid?",children:Object(u.jsx)(Oa,{viewMenu:a})}),Object(u.jsx)(b.a,{path:"/noprint/:eid?",children:Object(u.jsx)(Zi,{getMenuItems:xa})}),Object(u.jsx)(b.a,{path:"/:eid?",children:Object(u.jsx)(Un,{viewMenu:a})})]})})})})},ya=document.getElementById("root");l.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(F.a,{store:Oi,children:Object(u.jsx)(s.a,{basename:"".concat("/AMCRMERP/htdocs/custom/amhpestimatesv2/card.php"),children:Object(u.jsx)(ga,{})})})}),ya)},72:function(e,t,n){}},[[449,1,2]]]);
//# sourceMappingURL=main.c15f2b2e.chunk.js.map